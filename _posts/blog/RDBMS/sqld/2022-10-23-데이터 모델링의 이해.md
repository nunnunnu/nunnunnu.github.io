---
상태: Invalid date
publish_date: 2022-10-23T20:30:00
title: "[SQLD 시험 준비] 데이터 모델링의 이해"
category: RDBMS
tags:
  - sql
  - RDBMS
  - sqld
last_modified_at: 2022-10-23
---
### 데이터 모델링

: 정보 시스템 구축을 위한 데이터관점, 프로세스관점의 업무 분석/ 데이터베이스 구축을 위한 분석 및 설계하는 과정

- 특징
    1. 추상화
    2. 단순화
    3. 명확화(정확화)
- 필요한 이유
    1. 업무 정보를 구성하는 기초가 되는 정보들에 대해 일정한 표기법에 의해 표현
    2. 데이터베이스를 생성해 개발 및 데이터관리에 사용
    3. 업무 흐름 설명, 분석
- 유의점
    1. 중복
    2. 비유연성
    3. 비일관성
- 관계
    - 존재에 의한 관계와 행위에 의한 관계로 구분가능. ERD에서는 존재와 행위를 구분하지 않고 단일화된 표기법을 사용
    - UML에는 클래스다이어그램의 관계 중 연산관계와 의존관계가 있고 이를 실선과 점선의 표기법으로 다르게 표현함
    - 관계명, 관계차수, 관계선택사양의 3가지 개념을 사용
    - 두개의 엔터티사이에 관심있는 연관규칙이 있는지, 정보의 조합이 발생하는지, 관계연결을 가능하게 하는 동사가 있는지, 관계연결에대한 규칙이 서술되어있는지 확인해야함
- 성능 데이터모델링 : 분석 및 설계단계부터 성능과 관련한 데이터모델링을 수행함(정규화/반정규화, 테이블분할/병합/추가, 칼럼추가, PK/FK조정, 슈퍼타입/서브타입 조정 등)
    - 데이터 증가가 빠를수록 성능개선비용 증가 → 테이블분할을 하게되는경우 할일이 많아짐
    - 성능을 튜닝하면서 변경되는 특징이 있음
    - 분석/설계단계에서 하면 비용을 최소화할수있음
    - 순서
        1. 정규화
        2. 용량산정
        3. 트랜잭션 유형 파악
        4. 반정규화
        5. 이력모델 조정, PK/FK조정, 슈퍼타입/서브타입 조정 수행
        6. 성능관점 데이터모델검증
    - 고려사항
        - 용량산정은 성능데이터모델링시 트랜잭션의 유형과 양을 파악가능해서 중요한 작업임
        - 물리적 데이터 모델링시, PK/FK의 칼럼의 순서조정, FK인덱스 생성 등은 성능 향상을 위한 데이터 모델링 작업에 중요한 요소
        - 이력데이터는 반복발생 → 다량데이터일 확률이 높음 ⇒ 특별히 성능을 고려해 칼럼 등을 추가하도록 설계
- 정규화
    - 1차 정규화 : 중복제거, 실행 후 인덱스 적용
- 반정규화 기법
    
    1. 테이블 분할(로우체이닝시 효과적임)
        
        1. 수직 분할 : 칼럼단위, 1:1관계
        2. 수평 분할 : 로우단위, 관계없음
        
        → 디스크 I/O분산, 데이터 접근 효율성
        
    2. 테이블 병합
    3. 테이블 추가(중복/통계/이력/부분테이블)
        1. 중복테이블 추가 : 원격지와의 조인을 줄이기 위해 같은 구조의 테이블 추가
        2. 부분테이블 추가 : 하나의 테이블의 전체칼럼 중 자주 이용하는 집중화된 칼럼들을 디스크 I/O를 줄이기위해 별도로 모아놓는 기법
    4. 칼럼추가(중복/파생/이력테이블에 칼럼추가)
        1. 중복칼럼 추가 : 조인 감소를 위해 여러 테이블에 동일칼럼 추가
        2. 파생칼럼 추가 : 조회성능을 위해 미리 계산된 칼럼 추가
        3. 이력테이블에 기능 칼럼 추가 : 최신값을 처리하는 이력의 특성을 고려, 기능성 칼럼 추가
    5. PK/FK조정
    6. 슈퍼/서브타입 조정
    
    - 판단요소
        - 정보에대한 재현의 적시성(ex.계산된 잔액을 위해 파생칼럼 추가)
        - 인덱스를 활용한 탐색으로 성능향상 가능
        - 윈도우 함수를 사용할 때 이전 또는 이후위치의 레코드에 접근 가능
- 정규화
    - 1차 정규화 : 중복제거, 실행 후 인덱스 적용
- 반정규화 기법
    
    1. 테이블 분할(로우체이닝시 효과적임)
        
        1. 수직 분할 : 칼럼단위, 1:1관계
        2. 수평 분할 : 로우단위, 관계없음
        
        → 디스크 I/O분산, 데이터 접근 효율성
        
    2. 테이블 병합
    3. 테이블 추가(중복/통계/이력/부분테이블)
        1. 중복테이블 추가 : 원격지와의 조인을 줄이기 위해 같은 구조의 테이블 추가
        2. 부분테이블 추가 : 하나의 테이블의 전체칼럼 중 자주 이용하는 집중화된 칼럼들을 디스크 I/O를 줄이기위해 별도로 모아놓는 기법
    4. 칼럼추가(중복/파생/이력테이블에 칼럼추가)
        1. 중복칼럼 추가 : 조인 감소를 위해 여러 테이블에 동일칼럼 추가
        2. 파생칼럼 추가 : 조회성능을 위해 미리 계산된 칼럼 추가
        3. 이력테이블에 기능 칼럼 추가 : 최신값을 처리하는 이력의 특성을 고려, 기능성 칼럼 추가
    5. PK/FK조정
    6. 슈퍼/서브타입 조정
    
    - 판단요소
        - 정보에대한 재현의 적시성(ex.계산된 잔액을 위해 파생칼럼 추가)
        - 인덱스를 활용한 탐색으로 성능향상 가능
        - 윈도우 함수를 사용할 때 이전 또는 이후위치의 레코드에 접근 가능
- 파티셔닝 : 논리적으로는 하나의 테이블이지만 물리적으로는 여러개의 테이블로 분리해 데이터 엑세스 성능 향상, 데이터 관리방법을 개선하는 방법
- 트랜잭션
    - 항상 전체를 대상으로 일괄처리 → 전체를 하나의 테이블로 구성(Rollup) (테이블을 서브타입별로 개별유지하면 Union연산에 의해 성능저하 가능성 있음)
    - 항상 서브타입을 개별로 처리 → 서브타입을 개별 테이블로 구성(Rolldown) (테이블을 하나로 통합시 불필요하게 많은 데이터 집적으로 성능저하)
    - 슈퍼+서브타입을 공동초리 → 슈퍼타입 + 서브타입 테이블로 구성(Identity) (개별유지시 조인에의해 성능저하)

— 1:M관계일때 부모테이블에 인덱스가 있더라도 상속받은 테이블도 인덱스가 필요함  
마찬가지로 FK생성 여부와는 별개로 상속받은 테이블에도 인덱스 생성이 필요함  

- 분산 데이터베이스 : 데이터가 여러지역에 분산되어있지만 하나의 데이터베이스처럼 사용하는 경우
    - 실시간 동기화가 요구되지 않을 때
    - 거의 실시간의 업무적 특징을 가질 때
    - 특정 서버에 부하가 집중되어 분산시킬때
    - 백업 site를 구성할때
    - 마스터 데이터는 분산데이터베이스에 복제분산 적용
- 외부단계 : 개별 사용자들 관점
- 개념단계 : 전체 데이터베이스의 논리적 구조 기술, 개념스키마 존재
- 내부단계 : 데이터베이스에 어떤 데이터가 어떻게 저장되어있는가를 기술, 내부스키마 가짐

### ERD

- 1976년 피터첸에 의해 만들어짐
- 엔터티 도출 → 배치 → 관계설정 →관계명 기술
- 관계의 명칭이 관계표현에 매우 중요한 부분임
- 중요엔터티를 왼쪽 상단에 추가 발생하는 엔터티를 오른쪽 하단에 배치

### 엔터티

- 반드시 해당업무에서 필요하며 관리하고자 하는 정보
- 지속적으로 존재하는 2개 이상의 인스턴스 집합
- 반드시 속성을 가짐
- 통계성 엔터티나 코드성 엔터티의 경우 관계 생략 가능, 그 외에는 반드시 다른 엔터티와 관계가 있음
- 유일한 식별자에 의해 식별가능해야함
- 발생 시점에 따른 분류
    - 기본엔터티(키 엔터티) : 독립적, 자신의 주 식별자를 가짐, 부모역할 (고객)
    - 중심엔터티(메인 엔터티) : 기본엔터티로부터 발생, 해당업무의 중심역할 (계약, 대출, 주문 등)
    - 행위 엔터티 : 주문목록 : 2개 이상의 부모엔터티로부터 발생, 내용이 자주 바뀜(변경 이력, 주문 목록)
- 유무에 따른 분류
    - 유형 엔터티 : 물리적 형태가 있고 안정적이고 지속적(상품, 사원)
    - 개념 엔터티 : 물리적 형태가 없는 관리해야할 개념적 정보(회사, 조직)
    - 무형 엔터티 : 업무 수행에 따라 비교적 많이 발생 (주문, 배송)
- 이름
    - 업무 용어 사용
    - 약어 사용 자제
    - 단수 명사 사용
    - 유일한 이름 부여
    - 생상하는 의미대로 이름 부여

### 속성

: 더 이상 분리되지 않는 최소의 데이터 단위

- 엔터티에 대한 자세하고 구체적인 정보를 나타냄
- 하나의 엔터티는 두개 이상의 속성을 가짐
- 하나의 속성은 단 하나의 속성값을 가짐
- 속성도 집합임
- 특성에 따른 분류
    - 기본 속성(BASIC) : 업무상 필요한 데이터에 대해 정의. (코드 성 데이터, 일련번호, 계산에 의해 생성된 속성은 제외)
    - 설계 속성(DESIGNED) : 업무를 규칙화하기 위해 새로 만들거나 변형한 속성, 코드 성 데이터, 일련번호 등
    - 파생 속성(DERIVED) : 다른 속성의 영향을 받아 발생. 주로 계산된 값들이 이에 해당. 가급적 적게 정의하는 것이 좋음. 조회시 빠른 성능을 위해 원래 속성의 값을 계산해서 저장할수 있도록 만든 속성
- 엔터티 구성 방식에 따른 분류
    - PK속성
    - FK속성
    - 일반속성
- 명칭 부여 방법
    - 업무에서 자주 사용하는 용어 사용
    - 약어 사용 자제
    - 서술식 이름x
    - 유일한 이름
- 도메인 : 속성 값의 데이터 타입과 크기, 추가적인 제약사함

### 식별자

: 하나의 엔터티에 구성되어 있는 여러 속성들에 대해 각 속성을 구분하기 위한 구분자

- 주식별자 : 각 인스턴스 구분가능, 해당 엔터티에 대한 대표성을 가져 타 엔터티와 참조관계를 연결할 수 있는 식별자 (ex.사번)
    - 유일성 : 주식별자에의해 모든 인스턴스가 유일하게 구분
    - 최소성 : 속성의 수는 유일성을 만족하는 최소의 수
    - 불변성 : 자주변하면안됨
    - 존재성 : 반드시 값이 들어와야함
    - 도출 기준
        - 자주 이용되는 속성
        - 속성(칼럼)의 수를 최소화
        - 명칭, 이름으로 기술되는 것은 가급적 자제
        - 자주 수정되는 속성은 자제
- 보조식별자(주민등록번호)
- 단일식별자(모든 칼럼들)
- 복합식별자
- 내부식별자(부서번호 제외)
- 외부식별자(부서번호)
- 인조식별자
- 본질식별자(모든칼럼들)

  

— 식별자관계 : 부모엔터티로부터 속성을 받아 자식엔터티의 주식별자로 사용하는 경우(연결선이 직선)

— 비식별자관계 : 부모엔터티로부터 속성을 받았지만 주식별자로는 사용하지 않음. 연결선이 점선