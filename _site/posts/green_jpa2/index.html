<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="ko-KR" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="[국비교육학원-수업내용정리] JPA2" />
<meta property="og:locale" content="ko_KR" />
<meta name="description" content="— API명세서 작성" />
<meta property="og:description" content="— API명세서 작성" />
<link rel="canonical" href="http://localhost:4000/posts/green_jpa2/" />
<meta property="og:url" content="http://localhost:4000/posts/green_jpa2/" />
<meta property="og:site_name" content="히히" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-12-13T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[국비교육학원-수업내용정리] JPA2" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-20T00:00:00+09:00","datePublished":"2022-12-13T00:00:00+09:00","description":"— API명세서 작성","headline":"[국비교육학원-수업내용정리] JPA2","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/green_jpa2/"},"url":"http://localhost:4000/posts/green_jpa2/"}</script>
<!-- End Jekyll SEO tag -->


  <title>[국비교육학원-수업내용정리] JPA2 | 히히
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="히히">
<meta name="application-name" content="히히">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.29.0/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      let self = this;this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          self.clearMode();
        }
        self.notify();
      });

      if (!this.hasMode) {
        return;
      }

      if (this.isDarkMode) {
        this.setDark();
      } else {
        this.setLight();
      }
    }

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isPreferDark() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }get modeStatus() {
      if (this.hasMode) {
        return this.mode;
      } else {
        return this.isPreferDark ? ModeToggle.DARK_MODE : ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        this.clearMode();
      } else {
        if (this.isPreferDark) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    }
  }

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/portfolio.jpeg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">히히</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">바보등장</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>홈</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>카테고리</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>태그</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>아카이브</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>정보</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/nunnunnu"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['nod15277','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">홈</a>
            </span>

          
        
          
        
          
            
              <span>[국비교육학원-수업내용정리] JPA2</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      포스트
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="검색..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">취소</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>[국비교육학원-수업내용정리] JPA2</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        게시
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1670857200"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2022/12/13
</time>

      </span>

      <!-- lastmod date -->
      
        <span>
          업데이트
          <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1674172800"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2023/01/20
</time>

        </span>
      
      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://github.com/username">jinny</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="6802 단어"
>
  <em>37 분</em>읽는 시간</span>

        </div>
      </div>
    </div>
  </header>

  <div class="content">
    <p>— API명세서 작성
<a href="/assets/images/green/IMG-20240908151546.png" class="popup img-link  shimmer"><img src="/assets/images/green/IMG-20240908151546.png" alt="images" loading="lazy"></a></p>

<ul>
  <li>회원 정보 조회시 비밀번호 빼고 조회하는 법</li>
</ul>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.green.jpa_test.member.entity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonIgnore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonIgnoreProperties</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonProperty</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>

<span class="nd">@Data</span>
<span class="nd">@AllArgsConstructor</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"member_info"</span><span class="o">)</span>
<span class="nd">@JsonIgnoreProperties</span><span class="o">(</span>
    <span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">"pwd"</span><span class="o">},</span> <span class="n">allowSetters</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">allowGetters</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//setter는 권한허용, getter는 권한비허용. </span>
    <span class="c1">//불러올때는 비번안나온다는소리</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberInfoVO</span> <span class="o">{</span>
    <span class="c1">//jpa가 _는 제대로 인식을 못함</span>
    <span class="c1">//mi_seq;mi_id;mi_pwd;mi_name;mi_nickname;mi_reg_dt;mi_status</span>
    <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span><span class="o">=</span><span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span> <span class="c1">//MYSQL의 AUTO_INCREMENT</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_seq"</span><span class="o">)</span> <span class="c1">//기본키의 이름이 mi_seq임</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">seq</span><span class="o">;</span> 
    
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_id"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">id</span><span class="o">;</span>
    <span class="c1">// @JsonIgnore //json형식으로 내보낼때 빠져서 나오나 입력할때도 빼고입력해야해서 적절하지않음</span>
    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"pwd"</span><span class="o">)</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_pwd"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">pwd</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_name"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_nickname"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">nickname</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_reg_dt"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Date</span> <span class="n">regDt</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_status"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">status</span><span class="o">;</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>
    <p>제품등록</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.green.jpa_test.entity</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
    
  <span class="nd">@Data</span>
  <span class="nd">@AllArgsConstructor</span>
  <span class="nd">@NoArgsConstructor</span>
  <span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"product_info"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductInfoVo</span> <span class="o">{</span>
      <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_seq"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">seq</span><span class="o">;</span>
    
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_name"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_price"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">price</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_discount"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Double</span> <span class="n">discount</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_reg_dt"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Date</span> <span class="n">regDt</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_status"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">stauts</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_stock"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">stock</span><span class="o">;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.green.jpa_test.repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.green.jpa_test.entity.ProductInfoVo</span><span class="o">;</span>
    
  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ProductRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">ProductInfoVo</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
      <span class="c1">// public Long countByName(String name);</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre>  <span class="nd">@Test</span>
  	<span class="nd">@Transactional</span>
  	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">productAdd</span><span class="o">(){</span>
  		<span class="nc">ProductInfoVo</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ProductInfoVo</span><span class="o">();</span>
  		<span class="n">p</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"제품명"</span><span class="o">);</span>
  		<span class="n">p</span><span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="mi">15000</span><span class="o">);</span>
  		<span class="n">p</span><span class="o">.</span><span class="na">setDiscount</span><span class="o">(</span><span class="mf">0.0</span><span class="o">);</span>
  		<span class="n">p</span><span class="o">.</span><span class="na">setRegDt</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
  		<span class="n">p</span><span class="o">.</span><span class="na">setStauts</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
  		<span class="n">p</span><span class="o">.</span><span class="na">setStock</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
  		<span class="n">prodRepo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
  	<span class="o">}</span>
  	<span class="c1">// @Test</span>
  	<span class="c1">// public void nameDupChkTest(){</span>
  	<span class="c1">// 	Long cnt = prodRepo.countByName("제품명");</span>
  	<span class="c1">// 	assertEquals(cnt, 1);</span>
  	<span class="c1">// } //제품이름은 동일할수도있음</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.green.jpa_test.api</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.LinkedHashMap</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PutMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.green.jpa_test.entity.ProductInfoVo</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.green.jpa_test.repository.ProductRepository</span><span class="o">;</span>
    
  <span class="nd">@RestController</span>
  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api/product"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductAPICountroller</span> <span class="o">{</span>
    
      <span class="nd">@Autowired</span> <span class="nc">ProductRepository</span> <span class="n">prodRepo</span><span class="o">;</span>
    
      <span class="nd">@PutMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">addProduct</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">ProductInfoVo</span> <span class="n">data</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
          <span class="c1">// if(prodRepo.countByName(data.getName())==1){</span>
          <span class="c1">//     map.put("status", false);</span>
          <span class="c1">//     map.put("message", data.getName()+"가 이미 등록되었습니다.");</span>
          <span class="c1">//     return new ResponseEntity&lt;&gt;(map, HttpStatus.NOT_ACCEPTABLE);</span>
          <span class="c1">// }</span>
          <span class="n">prodRepo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"제품이 등록되었습니다."</span><span class="o">);</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <p><a href="/assets/images/green/IMG-20240908151546-1.png" class="popup img-link  shimmer"><img src="/assets/images/green/IMG-20240908151546-1.png" alt="images" loading="lazy"></a>]]</p>
  </li>
  <li>
    <p>페이지기능</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.green.jpa_test.repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.data.domain.Pageable</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.green.jpa_test.entity.ProductInfoVo</span><span class="o">;</span>
    
  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ProductRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">ProductInfoVo</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
      <span class="c1">// public Long countByName(String name);</span>
      <span class="c1">// public List&lt;ProductInfoVo&gt; findAll(); //DB안의 데이터 모두 조회 가능</span>
      <span class="kd">public</span> <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">ProductInfoVo</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>  <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/list"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">getProductList</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
            
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"list"</span><span class="o">,</span> <span class="n">prodRepo</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">pageable</span><span class="o">));</span>
    
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
      <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <p><a href="/assets/images/green/IMG-20240908151546-2.png" class="popup img-link  shimmer"><img src="/assets/images/green/IMG-20240908151546-2.png" alt="images" loading="lazy"></a></p>

    <p><a href="http://localhost:8999/api/product/list?page=0&amp;size=10&amp;sort=seq,desc">http://localhost:8999/api/product/list?page=0&amp;size=10&amp;sort=seq,desc</a></p>

    <p>1페이지 10개, 최신등록순 정렬</p>
  </li>
  <li>
    <p>로그인</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.green.jpa_test.member.vo</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
    
  <span class="nd">@Data</span>
  <span class="nd">@AllArgsConstructor</span>
  <span class="nd">@NoArgsConstructor</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginVO</span> <span class="o">{</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">id</span><span class="o">;</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">pwd</span><span class="o">;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.green.jpa_test.member.repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.green.jpa_test.member.entity.MemberInfoVO</span><span class="o">;</span>
    
  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MemberRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">MemberInfoVO</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span> <span class="c1">//repository의 기본키 값이 Long이라 Long을 넣음</span>
      <span class="c1">// MemberInfoVO findById(String id);</span>
      <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">countById</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">);</span> <span class="c1">//select count(*) from member_info where mi_id = ""; 자동생성해줌. </span>
      <span class="c1">//이미 만들어진것은 커스텀하기까다로움</span>
      <span class="kd">public</span> <span class="nc">MemberInfoVO</span> <span class="nf">findByIdAndPwd</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">pwd</span><span class="o">);</span> <span class="c1">//0아니면 1로 값이 나옴.</span>
      <span class="c1">//member_info db의 id, pwd를 조회함. findByMi_IdAndMi_Pwd를 spring이 인식하기 못하기때문에 MemberInfo에서 이름지정을 해줌</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>  <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/login"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">userLogin</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">LoginVO</span> <span class="n">data</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
          <span class="nc">MemberInfoVO</span> <span class="n">loginUser</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="na">findByIdAndPwd</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span><span class="n">data</span><span class="o">.</span><span class="na">getPwd</span><span class="o">());</span>
          <span class="k">if</span><span class="o">(</span><span class="n">loginUser</span> <span class="o">==</span><span class="kc">null</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"아이디 또는 비밀번호 오류입니다."</span><span class="o">);</span>
              <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">UNAUTHORIZED</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"로그인 되었습니다."</span><span class="o">);</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
      <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.green.jpa_test.member.entity</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonIgnore</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonIgnoreProperties</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonProperty</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
    
  <span class="nd">@Data</span>
  <span class="nd">@AllArgsConstructor</span>
  <span class="nd">@NoArgsConstructor</span>
  <span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"member_info"</span><span class="o">)</span>
  <span class="nd">@JsonIgnoreProperties</span><span class="o">(</span>
      <span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">"pwd"</span><span class="o">},</span> <span class="n">allowSetters</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">allowGetters</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//setter는 권한허용, getter는 권한비허용. </span>
      <span class="c1">//불러올때는 비번안나온다는소리</span>
  <span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberInfoVO</span> <span class="o">{</span>
      <span class="c1">//jpa가 _는 제대로 인식을 못함</span>
      <span class="c1">//mi_seq;mi_id;mi_pwd;mi_name;mi_nickname;mi_reg_dt;mi_status</span>
      <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span><span class="o">=</span><span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span> <span class="c1">//MYSQL의 AUTO_INCREMENT</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_seq"</span><span class="o">)</span> <span class="c1">//기본키의 이름이 mi_seq임</span>
      <span class="kd">private</span> <span class="nc">Long</span> <span class="n">seq</span><span class="o">;</span> 
        
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_id"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">id</span><span class="o">;</span>
      <span class="c1">// @JsonIgnore //json형식으로 내보낼때 빠져서 나오나 입력할때도 빼고입력해야해서 적절하지않음</span>
      <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"pwd"</span><span class="o">)</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_pwd"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">pwd</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_name"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_nickname"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">nickname</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_reg_dt"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Date</span> <span class="n">regDt</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_status"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">status</span><span class="o">;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>
  </li>
  <li>
    <p>한개 조회</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>  <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/detail"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">getProductDetail</span><span class="o">(</span><span class="nd">@RequestParam</span> <span class="nc">Integer</span> <span class="n">prodNo</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"detail"</span><span class="o">,</span> <span class="n">prodRepo</span><span class="o">.</span><span class="na">findBySeq</span><span class="o">(</span><span class="n">prodNo</span><span class="o">));</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
      <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ProductRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">ProductInfoVo</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
      <span class="c1">// public Long countByName(String name);</span>
      <span class="c1">// public List&lt;ProductInfoVo&gt; findAll(); //DB안의 데이터 모두 조회 가능</span>
      <span class="kd">public</span> <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">ProductInfoVo</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
      <span class="kd">public</span> <span class="nc">ProductInfoVo</span> <span class="nf">findBySeq</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">seq</span><span class="o">);</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>
  </li>
  <li>
    <p>default 지정</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>  		<span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_name"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_price"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">price</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_discount"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Double</span> <span class="n">discount</span><span class="o">=</span><span class="mf">0.0</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_reg_dt"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Date</span> <span class="n">regDt</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">();</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_status"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">stauts</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_stock"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">stock</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <p>가장 간단한 방법</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.green.jpa_test.product.entity</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.hibernate.annotations.DynamicInsert</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.hibernate.annotations.DynamicUpdate</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
    
  <span class="nd">@Data</span>
  <span class="nd">@AllArgsConstructor</span>
  <span class="nd">@NoArgsConstructor</span>
  <span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"product_info"</span><span class="o">)</span>
  <span class="nd">@DynamicInsert</span>
  <span class="nd">@DynamicUpdate</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductInfoVo</span> <span class="o">{</span>
      <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_seq"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">seq</span><span class="o">;</span>
    
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_name"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_price"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">price</span><span class="o">;</span><span class="c1">//=0;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_discount"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Double</span> <span class="n">discount</span><span class="o">;</span><span class="c1">//=0.0;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_reg_dt"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Date</span> <span class="n">regDt</span><span class="o">;</span><span class="c1">//= new Date();</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_status"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">stauts</span><span class="o">;</span><span class="c1">//=1;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_stock"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">stock</span><span class="o">;</span><span class="c1">//=0;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <p>확실한 방법</p>
  </li>
  <li>
    <p>제품 삭제</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.green.jpa_test.product.repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.data.domain.Pageable</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.green.jpa_test.product.entity.ProductInfoVo</span><span class="o">;</span>
    
  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ProductRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">ProductInfoVo</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
      <span class="c1">// public Long countByName(String name);</span>
      <span class="c1">// public List&lt;ProductInfoVo&gt; findAll(); //DB안의 데이터 모두 조회 가능</span>
      <span class="kd">public</span> <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">ProductInfoVo</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
      <span class="kd">public</span> <span class="nc">ProductInfoVo</span> <span class="nf">findBySeq</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">seq</span><span class="o">);</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteBySeq</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">seq</span><span class="o">);</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>  <span class="nd">@DeleteMapping</span><span class="o">(</span><span class="s">""</span><span class="o">)</span>
      <span class="nd">@Transactional</span>  <span class="c1">//sql실행시 오류가 발생한다면 실행이전으로 되돌림</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">deleteProduct</span><span class="o">(</span><span class="nd">@RequestParam</span> <span class="nc">Integer</span> <span class="n">prodNo</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
          <span class="n">prodRepo</span><span class="o">.</span><span class="na">deleteBySeq</span><span class="o">(</span><span class="n">prodNo</span><span class="o">);</span> <span class="c1">//delete from product_info where pi_seq="";</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"제품 정보를 삭제했습니다."</span><span class="o">);</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
  	  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>
  </li>
  <li>
    <p>제품 수정</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.green.jpa_test.product.entity</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.hibernate.annotations.DynamicInsert</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.hibernate.annotations.DynamicUpdate</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Builder</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
    
  <span class="nd">@Data</span>
  <span class="nd">@AllArgsConstructor</span>
  <span class="nd">@NoArgsConstructor</span>
  <span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"product_info"</span><span class="o">)</span>
  <span class="nd">@DynamicInsert</span>
  <span class="nd">@DynamicUpdate</span>
  <span class="nd">@Builder</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductInfoVo</span> <span class="o">{</span>
      <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_seq"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">seq</span><span class="o">;</span>
    
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_name"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_price"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">price</span><span class="o">;</span><span class="c1">//=0;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_discount"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Double</span> <span class="n">discount</span><span class="o">;</span><span class="c1">//=0.0;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_reg_dt"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Date</span> <span class="n">regDt</span><span class="o">;</span><span class="c1">//= new Date();</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_status"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">stauts</span><span class="o">;</span><span class="c1">//=1;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"pi_stock"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">stock</span><span class="o">;</span><span class="c1">//=0;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <p>Builder 추가</p>

    <p>save시 기본값이 없이 세팅되면 insert, 기본값이 있으면 update</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="rouge-code"><pre>  <span class="nd">@PatchMapping</span><span class="o">(</span><span class="s">"/update/{type}"</span><span class="o">)</span>
      <span class="nd">@Transactional</span>  <span class="c1">//sql실행시 오류가 발생한다면 실행이전으로 되돌림</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">updateProduct</span><span class="o">(</span>
          <span class="nd">@RequestParam</span> <span class="nc">Integer</span> <span class="n">prodNo</span><span class="o">,</span> 
          <span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span>
          <span class="nd">@RequestParam</span> <span class="nc">String</span> <span class="n">value</span>    
      <span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
          <span class="nc">ProductInfoVo</span> <span class="n">data</span> <span class="o">=</span> <span class="n">prodRepo</span><span class="o">.</span><span class="na">findBySeq</span><span class="o">(</span><span class="n">prodNo</span><span class="o">);</span>
          <span class="k">if</span><span class="o">(</span><span class="n">data</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"해당 제품이 존재하지 않습니다. 제품번호를 확인해주세요."</span><span class="o">);</span>
              <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"name"</span><span class="o">)){</span> 
              <span class="n">data</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
          <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"price"</span><span class="o">)){</span>
              <span class="n">data</span><span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">value</span><span class="o">));</span>
          <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"discount"</span><span class="o">)){</span>
              <span class="n">data</span><span class="o">.</span><span class="na">setDiscount</span><span class="o">(</span><span class="nc">Double</span><span class="o">.</span><span class="na">parseDouble</span><span class="o">(</span><span class="n">value</span><span class="o">));</span>
          <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"regDt"</span><span class="o">)){</span>
              <span class="nc">SimpleDateFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="o">);</span>
              <span class="k">try</span><span class="o">{</span><span class="n">data</span><span class="o">.</span><span class="na">setRegDt</span><span class="o">(</span><span class="n">format</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">value</span><span class="o">));}</span>
              <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span><span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();}</span>
                
          <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"status"</span><span class="o">)){</span>
              <span class="n">data</span><span class="o">.</span><span class="na">setStauts</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">value</span><span class="o">));</span>
                
          <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"stock"</span><span class="o">)){</span>
              <span class="n">data</span><span class="o">.</span><span class="na">setStock</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">value</span><span class="o">));</span>
                
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"타입이 잘못되었습니다. {name, price, discount, regDt}"</span><span class="o">);</span>
              <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="n">prodRepo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"제품 정보를 수정했습니다."</span><span class="o">);</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
      <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <p><a href="http://localhost:8999/api/product/update/stock?prodNo=44&amp;value=100">http://localhost:8999/api/product/update/stock?prodNo=44&amp;value=100</a></p>

    <p>주소예시</p>
  </li>
</ul>

<hr />

<h3 id="todolist"><span class="me-2">todolist</span><a href="#todolist" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>— rest client 사용법</p>

<p><a href="/assets/images/green/IMG-20240908151546-3.png" class="popup img-link  shimmer"><img src="/assets/images/green/IMG-20240908151546-3.png" alt="images" loading="lazy"></a></p>

<p>파일 생성 후</p>

<p><a href="/assets/images/green/IMG-20240908151547.png" class="popup img-link  shimmer"><img src="/assets/images/green/IMG-20240908151547.png" alt="images" loading="lazy"></a></p>

<p>작성 후 send Request 또는 ctrl+alt+R 누르면</p>

<p><a href="/assets/images/green/IMG-20240908151547-1.png" class="popup img-link  shimmer"><img src="/assets/images/green/IMG-20240908151547-1.png" alt="images" loading="lazy"></a></p>

<p>이런식으로 뜸</p>

<p>— 파일</p>

<p>파일 저장 경로(꼭 이렇게해야하는건아니나 이걸 추천)</p>

<p><a href="/assets/images/green/IMG-20240908151547-2.png" class="popup img-link  shimmer"><img src="/assets/images/green/IMG-20240908151547-2.png" alt="images" loading="lazy"></a></p>

<p>application.properties에서 관리함.</p>

<p><a href="/assets/images/green/IMG-20240908151547-3.png" class="popup img-link  shimmer"><img src="/assets/images/green/IMG-20240908151547-3.png" alt="images" loading="lazy"></a></p>

<p>파일 경로 지정. 사용자 정의 설정값(여기 주석 #이라서 사진 그대로 쓰면 안됨;;. 주소치고 띄어쓰기해도 오류남.)</p>

<ul>
  <li>파일 업로드 메소드</li>
</ul>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.jh_project.todo.todoList.file.api</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.nio.file.Files</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Path</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.StandardCopyOption</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.LinkedHashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Value</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.Resource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.UrlResource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpHeaders</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.MediaType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PutMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestPart</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.multipart.MultipartFile</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileAPIController</span> <span class="o">{</span>
    <span class="c1">// 파일 업로드, 다운로드는 어느 프로젝프든 거의 동일함. 복붙추천</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${file.image.todo}"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">todo_img_path</span><span class="o">;</span> <span class="c1">//springframework.beans임</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${file.image.member}"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">member_img_path</span><span class="o">;</span> 
    <span class="c1">//이것도 DI임. 이미지 파일의 경로가 바뀌어도 application.properties만 고쳐주면 됨</span>

    <span class="nd">@PutMapping</span><span class="o">(</span><span class="s">"/{type}/upload"</span><span class="o">)</span> <span class="c1">//todo이미지를 올릴것인지 file이미지를 올릴것인지</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">putImageUpload</span><span class="o">(</span>
        <span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span>
        <span class="nd">@RequestPart</span> <span class="nc">MultipartFile</span> <span class="n">file</span> <span class="c1">//파일을 받는 객체. postman에 file이라고 변수 그대로 적어주어야함</span>
        <span class="o">){</span>
            <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getOriginalFilename</span><span class="o">());</span> <span class="c1">//업로드 할 파일의 원본이름 확장자까지 출력</span>
            <span class="c1">//Path - 폴더 및 파일의 위치를 나타내는 객체, Paths - 폴더 및 파일을 가져오고 경로를 만들기 위한 파일 유틸리티 클래스</span>
            <span class="nc">Path</span> <span class="n">folderLocation</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">//todo_img_path 문자열로부터 실제 폴더 경로를 가져옴.</span>
            <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"todo"</span><span class="o">)){</span>
                <span class="n">folderLocation</span> <span class="o">=</span> <span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">todo_img_path</span><span class="o">);</span>
                
            <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"member"</span><span class="o">)){</span>
                <span class="n">folderLocation</span> <span class="o">=</span> <span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member_img_path</span><span class="o">);</span>
            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
                <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"타입정보가 잘못되었습니다. ex:/todo/upload, /member/upload"</span><span class="o">);</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="nc">Path</span> <span class="n">targerFile</span> <span class="o">=</span> <span class="n">folderLocation</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getOriginalFilename</span><span class="o">());</span> <span class="c1">//폴더 경로와 파일의 이름을 합쳐서 목표 파일의 경로 생성</span>
            <span class="k">try</span><span class="o">{</span>
                <span class="c1">//Files는 파일 처리에 대한 유틸리티 클래스</span>
                <span class="c1">//copy - 복사, file.getInputStream() - 파일을 열어서 파일의 내용을 읽는 준비</span>
                <span class="c1">//targetFile 경로로, standardCopyOption.REPLACE_EXISTING - 같은 파일이 있다면 덮어쓰기.</span>
                <span class="nc">Files</span><span class="o">.</span><span class="na">copy</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="n">targerFile</span><span class="o">,</span> <span class="nc">StandardCopyOption</span><span class="o">.</span><span class="na">REPLACE_EXISTING</span><span class="o">);</span> 
            <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span><span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();}</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
        <span class="o">}</span> <span class="c1">//파일 업로드 메소드</span>
</pre></td></tr></tbody></table></code></div></div>

<p>postman에서 key File로 만들고 file이라고 파라미터 적어주고(메소드의 파라미터 변수명과 동일하게 작성) value에 파일을 첨부</p>

<p><a href="/assets/images/green/IMG-20240908151547.mp4" class="popup img-link  shimmer"><img src="/assets/images/green/IMG-20240908151547.mp4" alt="" loading="lazy"></a></p>
<video controls="" width="640" height="360"> <source src="/assets/images/green/IMG-20240908151547.mp4" type="video/mp4" /></video>

<p>send하면 위에 지정해둔 폴더에 파일이 저장된걸 확인할 수 있음</p>

<ul>
  <li>
    <p>파일 업로드 수정버전</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="rouge-code"><pre>  <span class="nd">@PutMapping</span><span class="o">(</span><span class="s">"/{type}/upload"</span><span class="o">)</span> <span class="c1">//todo이미지를 올릴것인지 file이미지를 올릴것인지</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">putImageUpload</span><span class="o">(</span>
          <span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span>
          <span class="nd">@RequestPart</span> <span class="nc">MultipartFile</span> <span class="n">file</span><span class="o">,</span> <span class="c1">//파일을 받는 객체. postman에 file이라고 변수 그대로 적어주어야함</span>
          <span class="nd">@RequestParam</span> <span class="nc">Long</span> <span class="n">seq</span> 
          <span class="o">){</span>
              <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
              <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getOriginalFilename</span><span class="o">());</span> <span class="c1">//업로드 할 파일의 원본이름 확장자까지 출력</span>
              <span class="c1">//Path - 폴더 및 파일의 위치를 나타내는 객체, Paths - 폴더 및 파일을 가져오고 경로를 만들기 위한 파일 유틸리티 클래스</span>
              <span class="nc">Path</span> <span class="n">folderLocation</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">//todo_img_path 문자열로부터 실제 폴더 경로를 가져옴.</span>
              <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"todo"</span><span class="o">)){</span>
                  <span class="n">folderLocation</span> <span class="o">=</span> <span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">todo_img_path</span><span class="o">);</span>
                    
              <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"member"</span><span class="o">)){</span>
                  <span class="n">folderLocation</span> <span class="o">=</span> <span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member_img_path</span><span class="o">);</span>
              <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                  <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
                  <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"타입정보가 잘못되었습니다. ex:/todo/upload, /member/upload"</span><span class="o">);</span>
                  <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
              <span class="o">}</span>
    
              <span class="nc">String</span> <span class="n">originFileName</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">getOriginalFilename</span><span class="o">();</span>
              <span class="nc">String</span><span class="o">[]</span> <span class="n">split</span> <span class="o">=</span> <span class="n">originFileName</span><span class="o">.</span><span class="na">split</span><span class="o">((</span><span class="s">"\\."</span><span class="o">));</span> <span class="c1">//.을 기준으로 나눔</span>
              <span class="nc">String</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">split</span><span class="o">[</span><span class="n">split</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">];</span> <span class="c1">//확장자</span>
              <span class="nc">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
              <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">split</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
                  <span class="n">fileName</span> <span class="o">+=</span> <span class="n">split</span><span class="o">[</span><span class="n">i</span><span class="o">];</span> <span class="c1">//원래 split[i]+"." 이렇게 해줘야함</span>
              <span class="o">}</span>
              <span class="nc">String</span> <span class="n">saveFileName</span> <span class="o">=</span> <span class="n">type</span><span class="o">+</span><span class="s">"_"</span><span class="o">;</span> <span class="c1">//보통 원본 이름을 저장하는것이아니라 시간대를 입력함</span>
              <span class="nc">Calendar</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
              <span class="n">saveFileName</span><span class="o">+=</span><span class="n">c</span><span class="o">.</span><span class="na">getTimeInMillis</span><span class="o">()+</span><span class="s">"."</span><span class="o">+</span><span class="n">ext</span><span class="o">;</span> <span class="c1">// todo_161310135.png 이런식으로 저장됨</span>
    
    
              <span class="nc">Path</span> <span class="n">targerFile</span> <span class="o">=</span> <span class="n">folderLocation</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span><span class="n">saveFileName</span><span class="o">);</span> <span class="c1">//폴더 경로와 파일의 이름을 합쳐서 목표 파일의 경로 생성</span>
              <span class="k">try</span><span class="o">{</span>
                  <span class="c1">//Files는 파일 처리에 대한 유틸리티 클래스</span>
                  <span class="c1">//copy - 복사, file.getInputStream() - 파일을 열어서 파일의 내용을 읽는 준비</span>
                  <span class="c1">//targetFile 경로로, standardCopyOption.REPLACE_EXISTING - 같은 파일이 있다면 덮어쓰기.</span>
                  <span class="nc">Files</span><span class="o">.</span><span class="na">copy</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="n">targerFile</span><span class="o">,</span> <span class="nc">StandardCopyOption</span><span class="o">.</span><span class="na">REPLACE_EXISTING</span><span class="o">);</span> 
              <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span><span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();}</span>
              <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
          <span class="o">}</span> <span class="c1">//파일 업로드 메소드</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <p><a href="/assets/images/green/20240908151956.png" class="popup img-link  shimmer"><img src="/assets/images/green/20240908151956.png" alt="images" loading="lazy"></a> <br />
  파일이름 member_1671076931157으로 저장됨</p>
  </li>
  <li>
    <p>url접속시 파일다운 메소드</p>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/image/{filename}"</span><span class="o">)</span>
        <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Resource</span><span class="o">&gt;</span> <span class="nf">putImageUpload</span><span class="o">(</span> <span class="c1">//core.io.Resource import해야함</span>
        <span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">filename</span><span class="o">,</span> <span class="nc">HttpServletRequest</span> <span class="n">request</span>
        <span class="o">){</span>
            <span class="c1">//Path - 폴더 및 파일의 위치를 나타내는 객체, Paths - 폴더 및 파일을 가져오고 경로를 만들기 위한 파일 유틸리티 클래스</span>
            <span class="nc">Path</span> <span class="n">folderLocation</span> <span class="o">=</span> <span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">todo_img_path</span><span class="o">);</span> <span class="c1">//todo_img_path 문자열로부터 실제 폴더 경로를 가져옴.</span>
            <span class="nc">Path</span> <span class="n">targerFile</span> <span class="o">=</span> <span class="n">folderLocation</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span> <span class="c1">//폴더 경로와 파일의 이름을 합쳐서 목표 파일의 경로 생성</span>
            <span class="c1">//다운로드 가능한 형태로 변환하기 위해 Resource객체 생성함</span>
            <span class="nc">Resource</span> <span class="n">r</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> 
            <span class="k">try</span><span class="o">{</span>
                <span class="c1">//일반파일 -&gt; Url로 첨부 가능한 형태로 변환</span>
                <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UrlResource</span><span class="o">(</span><span class="n">targerFile</span><span class="o">.</span><span class="na">toUri</span><span class="o">());</span>
            <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span><span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();}</span> <span class="c1">//fileNotFoundException이 많이 나옴</span>
            <span class="c1">//첨부된 파일의 타입을 저장하기 위한 변수 생성</span>
            <span class="nc">String</span> <span class="n">contentType</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="k">try</span><span class="o">{</span>
                <span class="c1">//첨부할 파일의 타입정보 산출</span>
                <span class="n">contentType</span> <span class="o">=</span>  <span class="n">request</span><span class="o">.</span><span class="na">getServletContext</span><span class="o">().</span><span class="na">getMimeType</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">getFile</span><span class="o">().</span><span class="na">getAbsolutePath</span><span class="o">());</span> 
                <span class="k">if</span><span class="o">(</span><span class="n">contentType</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">//산출한 파일의 타입이 null이면 </span>
                    <span class="c1">//일반 파일로 처리</span>
                    <span class="n">contentType</span> <span class="o">=</span> <span class="s">"application/octet-stream"</span><span class="o">;</span> <span class="c1">//파일종류에따라서 동작이 다름. 만약 contentType이 안들어오면 그냥 다운로드함.</span>
                <span class="o">}</span>
            <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span><span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();}</span>
            <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">()</span> <span class="c1">// 200 OK가 나옴</span>
                <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">parseMediaType</span><span class="o">(</span><span class="n">contentType</span><span class="o">))</span> <span class="c1">//산출한 타입을 응답에 맞는 형태로 변환</span>
                <span class="c1">//내보낼 내용의 타입을 설정(파일), </span>
                <span class="c1">// attachment; filename*=\""+r.getFilename()+"\" - 요청한 쪽에서 다운로드한 파일의 이름을 결정(원본 파일 이름 그대로 결정)</span>
                <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="nc">HttpHeaders</span><span class="o">.</span><span class="na">CONTENT_DISPOSITION</span><span class="o">,</span> <span class="s">"attachment; filename*=\""</span><span class="o">+</span><span class="n">r</span><span class="o">.</span><span class="na">getFilename</span><span class="o">()+</span><span class="s">"\""</span><span class="o">)</span>
                <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">r</span><span class="o">);</span> <span class="c1">//변환된 파일을 ResponseEntity에 추가</span>
        <span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="http://localhost:9988/image/Fj8pPNYaAAAoWja.jpg">http://localhost:9988/image/Fj8pPNYaAAAoWja.jpg</a> 아래 주소로 가면 파일 다운됨. 파일이름을 확장자까지 정확하게 써줘야함.</p>

<ul>
  <li>
    <p>멤버</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.member.entity</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonIgnoreProperties</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonProperty</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
    
  <span class="nd">@Data</span>
  <span class="nd">@AllArgsConstructor</span>
  <span class="nd">@NoArgsConstructor</span>
  <span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"member_info"</span><span class="o">)</span>
  <span class="nd">@JsonIgnoreProperties</span><span class="o">(</span>
      <span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">"pwd"</span><span class="o">},</span> <span class="n">allowGetters</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">allowSetters</span> <span class="o">=</span> <span class="kc">true</span>
  <span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberInfoEntity</span> <span class="o">{</span>
      <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_seq"</span><span class="o">)</span>    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">seq</span><span class="o">;</span>
    
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_email"</span><span class="o">)</span>  <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
      <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"pwd"</span><span class="o">)</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_pwd"</span><span class="o">)</span>    <span class="kd">private</span> <span class="nc">String</span> <span class="n">pwd</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_name"</span><span class="o">)</span>   <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_birth"</span><span class="o">)</span>  <span class="kd">private</span> <span class="nc">Date</span> <span class="n">birth</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"mi_reg_dt"</span><span class="o">)</span> <span class="kd">private</span> <span class="nc">Date</span> <span class="n">regDt</span><span class="o">;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.member.repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.entity.MemberInfoEntity</span><span class="o">;</span>
  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">memberRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">MemberInfoEntity</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
      <span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">countByEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">);</span>
      <span class="kd">public</span> <span class="nc">MemberInfoEntity</span> <span class="nf">findByEmailAndPwd</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">,</span> <span class="nc">String</span> <span class="n">pwd</span><span class="o">);</span>
        
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.member.data</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
    
  <span class="nd">@Data</span>
  <span class="nd">@AllArgsConstructor</span>
  <span class="nd">@NoArgsConstructor</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginVO</span> <span class="o">{</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">pwd</span><span class="o">;</span>    
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.member.service</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.LinkedHashMap</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.data.LoginVO</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.entity.MemberInfoEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.repository.memberRepository</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.utils.AESAlgorith</span><span class="o">;</span>
    
  <span class="nd">@Service</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberService</span> <span class="o">{</span>
      <span class="nd">@Autowired</span> <span class="n">memberRepository</span> <span class="n">m_repo</span><span class="o">;</span>
        
      <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">addMember</span><span class="o">(</span><span class="nc">MemberInfoEntity</span> <span class="n">data</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">resultMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
          <span class="k">if</span><span class="o">(</span><span class="n">m_repo</span><span class="o">.</span><span class="na">countByEmail</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())==</span><span class="mi">1</span><span class="o">){</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()+</span><span class="s">"은/는 이미 가입된 이메일입니다."</span><span class="o">);</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
              <span class="k">try</span><span class="o">{</span>
                  <span class="nc">String</span> <span class="n">encPwd</span> <span class="o">=</span> <span class="nc">AESAlgorith</span><span class="o">.</span><span class="na">Encrypt</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getPwd</span><span class="o">());</span>
                  <span class="n">data</span><span class="o">.</span><span class="na">setPwd</span><span class="o">(</span><span class="n">encPwd</span><span class="o">);</span>
              <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span><span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();}</span>
    
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"회원이 등록되었습니다."</span><span class="o">);</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
              <span class="n">m_repo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="k">return</span> <span class="n">resultMap</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">loginMember</span><span class="o">(</span><span class="nc">LoginVO</span> <span class="n">data</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">resultMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
          <span class="nc">MemberInfoEntity</span> <span class="n">loginUser</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
          <span class="k">try</span><span class="o">{</span>
              <span class="n">loginUser</span> <span class="o">=</span> <span class="n">m_repo</span><span class="o">.</span><span class="na">findByEmailAndPwd</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="nc">AESAlgorith</span><span class="o">.</span><span class="na">Encrypt</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getPwd</span><span class="o">()));</span>
          <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span><span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();}</span>
          <span class="k">if</span><span class="o">(</span><span class="n">loginUser</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"로그인 실패. 이메일 또는 비밀번호를 확인해주세요."</span><span class="o">);</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"로그인 성공"</span><span class="o">);</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">ACCEPTED</span><span class="o">);</span>
              <span class="n">resultMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"loginUser"</span><span class="o">,</span> <span class="n">loginUser</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="k">return</span> <span class="n">resultMap</span><span class="o">;</span>
      <span class="o">}</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.member.api</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.servlet.http.HttpSession</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PostMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PutMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.data.LoginVO</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.entity.MemberInfoEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.service.MemberService</span><span class="o">;</span>
    
  <span class="nd">@RestController</span>
  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api/member"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberAPIController</span> <span class="o">{</span>
      <span class="nd">@Autowired</span> <span class="nc">MemberService</span> <span class="n">mService</span><span class="o">;</span>
      <span class="nd">@PutMapping</span><span class="o">(</span><span class="s">"/join"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">memberJoin</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">MemberInfoEntity</span> <span class="n">data</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">resultMap</span> <span class="o">=</span> <span class="n">mService</span><span class="o">.</span><span class="na">addMember</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;(</span><span class="n">resultMap</span><span class="o">,</span> <span class="o">(</span><span class="nc">HttpStatus</span><span class="o">)</span><span class="n">resultMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"code"</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/login"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">memberLogin</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">LoginVO</span> <span class="n">data</span><span class="o">,</span> <span class="nc">HttpSession</span> <span class="n">session</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">resultMap</span> <span class="o">=</span> <span class="n">mService</span><span class="o">.</span><span class="na">loginMember</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
          <span class="n">session</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"loginUser"</span><span class="o">,</span> <span class="n">resultMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"loginUser"</span><span class="o">));</span> 
          <span class="c1">//실패하면 null이라 로그인 안됨.session의 값이 채워지면 로그인상태임. 모든 코드에서 사용가능(Html도 마찬가지임)</span>
          <span class="c1">//프론트에서는 사용못함!!</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">resultMap</span><span class="o">,</span> <span class="o">(</span><span class="nc">HttpStatus</span><span class="o">)</span><span class="n">resultMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"code"</span><span class="o">));</span>
      <span class="o">}</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>
  </li>
  <li>
    <p>투두</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.todoList.entity</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
    
  <span class="nd">@Data@AllArgsConstructor@NoArgsConstructor</span>
  <span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"todo_info"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoInfoEntity</span> <span class="o">{</span>
      <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ti_seq"</span><span class="o">)</span> <span class="kd">private</span> <span class="nc">Long</span> <span class="n">seq</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ti_mi_seq"</span><span class="o">)</span> <span class="kd">private</span> <span class="nc">Long</span> <span class="n">miSeq</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ti_content"</span><span class="o">)</span> <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ti_status"</span><span class="o">)</span> <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">status</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ti_start_dt"</span><span class="o">)</span> <span class="kd">private</span> <span class="nc">Date</span> <span class="n">startDt</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ti_end_dt"</span><span class="o">)</span> <span class="kd">private</span> <span class="nc">Date</span> <span class="n">endDt</span><span class="o">;</span>
    
        
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.todoList.repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.todoList.entity.TodoInfoEntity</span><span class="o">;</span>
  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TodoRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">TodoInfoEntity</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
      <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TodoInfoEntity</span><span class="o">&gt;</span> <span class="nf">findAllByMiSeq</span><span class="o">(</span><span class="nc">Long</span> <span class="n">miSeq</span><span class="o">);</span>
      <span class="kd">public</span> <span class="nc">TodoInfoEntity</span> <span class="nf">findBySeq</span><span class="o">(</span><span class="nc">Long</span> <span class="n">seq</span><span class="o">);</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteBySeqAndMiSeq</span><span class="o">(</span><span class="nc">Long</span> <span class="n">seq</span><span class="o">,</span> <span class="nc">Long</span> <span class="n">miSeq</span><span class="o">);</span>
      <span class="kd">public</span> <span class="nc">TodoInfoEntity</span> <span class="nf">findBySeqAndMiSeq</span><span class="o">(</span><span class="nc">Long</span> <span class="n">seq</span><span class="o">,</span> <span class="nc">Long</span> <span class="n">miSeq</span><span class="o">);</span>
      <span class="c1">//select * from todo_info where ti_end_dt between [start] and [end] and ti_mi_seq=[miSeq]</span>
      <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TodoInfoEntity</span><span class="o">&gt;</span> <span class="nf">findByEndDtBetweenAndMiSeq</span><span class="o">(</span><span class="nc">Date</span> <span class="n">start</span><span class="o">,</span> <span class="nc">Date</span> <span class="n">end</span><span class="o">,</span> <span class="nc">Long</span> <span class="n">miSeq</span><span class="o">);</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.todoList.service</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.LinkedHashMap</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.servlet.http.HttpSession</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.transaction.Transactional</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.entity.MemberInfoEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.todoList.entity.TodoInfoEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.todoList.repository.TodoRepository</span><span class="o">;</span>
    
  <span class="nd">@Service</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoInfoService</span> <span class="o">{</span>
      <span class="nd">@Autowired</span> <span class="nc">TodoRepository</span> <span class="n">t_repo</span><span class="o">;</span>
    
      <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">addTodoList</span><span class="o">(</span><span class="nc">TodoInfoEntity</span> <span class="n">data</span><span class="o">,</span> <span class="nc">HttpSession</span> <span class="n">session</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
          <span class="nc">MemberInfoEntity</span> <span class="n">loginUser</span> <span class="o">=</span> <span class="o">(</span><span class="nc">MemberInfoEntity</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"loginUser"</span><span class="o">);</span>
          <span class="k">if</span><span class="o">(</span><span class="n">loginUser</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"로그인이 필요합니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">FORBIDDEN</span><span class="o">);</span>
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
              <span class="n">data</span><span class="o">.</span><span class="na">setMiSeq</span><span class="o">(</span><span class="n">loginUser</span><span class="o">.</span><span class="na">getSeq</span><span class="o">());</span>
              <span class="n">t_repo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"일정이 추가되었습니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">getTodoList</span><span class="o">(</span><span class="nc">HttpSession</span> <span class="n">session</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
          <span class="nc">MemberInfoEntity</span> <span class="n">loginUser</span> <span class="o">=</span> <span class="o">(</span><span class="nc">MemberInfoEntity</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"loginUser"</span><span class="o">);</span>
          <span class="k">if</span><span class="o">(</span><span class="n">loginUser</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"로그인이 필요합니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">FORBIDDEN</span><span class="o">);</span>
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"list"</span><span class="o">,</span> <span class="n">t_repo</span><span class="o">.</span><span class="na">findAllByMiSeq</span><span class="o">(</span><span class="n">loginUser</span><span class="o">.</span><span class="na">getSeq</span><span class="o">()));</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"조회하였습니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
                
          <span class="o">}</span>
          <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">updateTodoStatus</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">status</span><span class="o">,</span> <span class="nc">Long</span> <span class="n">seq</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
          <span class="nc">TodoInfoEntity</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">t_repo</span><span class="o">.</span><span class="na">findBySeq</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
          <span class="k">if</span><span class="o">(</span><span class="n">todo</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"잘못된 todo번호입니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">FORBIDDEN</span><span class="o">);</span>
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
              <span class="n">todo</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">status</span><span class="o">);</span>
              <span class="n">t_repo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"todo 상태가 변경되었습니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
          <span class="o">}</span>
            
          <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">updateTodoContent</span><span class="o">(</span><span class="nc">String</span> <span class="n">content</span><span class="o">,</span> <span class="nc">Long</span> <span class="n">seq</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
          <span class="nc">TodoInfoEntity</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">t_repo</span><span class="o">.</span><span class="na">findBySeq</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
          <span class="k">if</span><span class="o">(</span><span class="n">todo</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"잘못된 todo번호입니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">FORBIDDEN</span><span class="o">);</span>
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
              <span class="n">todo</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="n">content</span><span class="o">);</span>
              <span class="n">t_repo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"todo 상태가 변경되었습니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="nd">@Transactional</span>
      <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">deleteTodo</span><span class="o">(</span><span class="nc">Long</span> <span class="n">seq</span><span class="o">,</span> <span class="nc">HttpSession</span> <span class="n">session</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
          <span class="nc">MemberInfoEntity</span> <span class="n">loginUser</span> <span class="o">=</span> <span class="o">(</span><span class="nc">MemberInfoEntity</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"loginUser"</span><span class="o">);</span>
          <span class="k">if</span><span class="o">(</span><span class="n">loginUser</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"로그인 후 사용가능한 기능입니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">FORBIDDEN</span><span class="o">);</span>
              <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
          <span class="o">}</span>
          <span class="nc">TodoInfoEntity</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">t_repo</span><span class="o">.</span><span class="na">findBySeqAndMiSeq</span><span class="o">(</span><span class="n">seq</span><span class="o">,</span> <span class="n">loginUser</span><span class="o">.</span><span class="na">getSeq</span><span class="o">());</span>
          <span class="k">if</span><span class="o">(</span><span class="n">todo</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"잘못된 Todo 번호입니다.."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">FORBIDDEN</span><span class="o">);</span>
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
              <span class="n">t_repo</span><span class="o">.</span><span class="na">deleteBySeqAndMiSeq</span><span class="o">(</span><span class="n">seq</span><span class="o">,</span> <span class="n">loginUser</span><span class="o">.</span><span class="na">getSeq</span><span class="o">());</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"todo가 삭제되었습니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">selectTodoListByTrem</span><span class="o">(</span><span class="nc">HttpSession</span> <span class="n">session</span><span class="o">,</span> <span class="nc">String</span> <span class="n">start</span><span class="o">,</span> <span class="nc">String</span> <span class="n">end</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
          <span class="nc">MemberInfoEntity</span> <span class="n">loginUser</span> <span class="o">=</span> <span class="o">(</span><span class="nc">MemberInfoEntity</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"loginUser"</span><span class="o">);</span>
          <span class="k">if</span><span class="o">(</span><span class="n">loginUser</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"로그인 후 사용가능한 기능입니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">FORBIDDEN</span><span class="o">);</span>
              <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
          <span class="o">}</span>
          <span class="nc">SimpleDateFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyMMdd"</span><span class="o">);</span>
          <span class="nc">Date</span> <span class="n">startDt</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
          <span class="nc">Date</span> <span class="n">endDt</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
          <span class="k">try</span><span class="o">{</span>
              <span class="n">startDt</span> <span class="o">=</span> <span class="n">format</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">start</span><span class="o">);</span>
              <span class="n">endDt</span> <span class="o">=</span> <span class="n">format</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">end</span><span class="o">);</span>
          <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"날짜 형식을 확인해주세요(yyMMdd ex:221214)"</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
              <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
                
          <span class="o">}</span>
          <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TodoInfoEntity</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">t_repo</span><span class="o">.</span><span class="na">findByEndDtBetweenAndMiSeq</span><span class="o">(</span><span class="n">startDt</span><span class="o">,</span> <span class="n">endDt</span><span class="o">,</span> <span class="n">loginUser</span><span class="o">.</span><span class="na">getSeq</span><span class="o">());</span>
          <span class="k">if</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()==</span><span class="mi">0</span><span class="o">){</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"일치하는 Todo가 없습니다. 날짜를 확인해주세요"</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">FORBIDDEN</span><span class="o">);</span>
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"list"</span><span class="o">,</span> <span class="n">list</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"조회완료되었습니다."</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
      <span class="o">}</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.todoList.api</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.LinkedHashMap</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.servlet.http.HttpSession</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.DeleteMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PatchMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PutMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.todoList.entity.TodoInfoEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.todoList.service.TodoInfoService</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">net.bytebuddy.agent.builder.AgentBuilder.FallbackStrategy.Simple</span><span class="o">;</span>
    
  <span class="nd">@RestController</span>
  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api/todo"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoAPIController</span> <span class="o">{</span>
      <span class="nd">@Autowired</span> <span class="nc">TodoInfoService</span> <span class="n">tService</span><span class="o">;</span>
      <span class="nd">@PutMapping</span><span class="o">(</span><span class="s">"/add"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">addTodo</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">TodoInfoEntity</span> <span class="n">data</span><span class="o">,</span> <span class="nc">HttpSession</span> <span class="n">session</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">tService</span><span class="o">.</span><span class="na">addTodoList</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">session</span><span class="o">);</span>
            
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="o">(</span><span class="nc">HttpStatus</span><span class="o">)</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"code"</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/list"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">getTodoList</span><span class="o">(</span><span class="nc">HttpSession</span> <span class="n">session</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">tService</span><span class="o">.</span><span class="na">getTodoList</span><span class="o">(</span><span class="n">session</span><span class="o">);</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="o">(</span><span class="nc">HttpStatus</span><span class="o">)</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"code"</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="nd">@PatchMapping</span><span class="o">(</span><span class="s">"/update/{type}"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">updateTodo</span><span class="o">(</span>
          <span class="nd">@RequestParam</span> <span class="nc">Long</span> <span class="n">seq</span><span class="o">,</span>
          <span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span>
          <span class="nd">@RequestParam</span> <span class="nc">String</span> <span class="n">value</span>
      <span class="o">){</span>
          <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"status"</span><span class="o">)){</span>
              <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">tService</span><span class="o">.</span><span class="na">updateTodoStatus</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">value</span><span class="o">),</span> <span class="n">seq</span><span class="o">);</span>
              <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="o">(</span><span class="nc">HttpStatus</span><span class="o">)</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"code"</span><span class="o">));</span>
          <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"content"</span><span class="o">)){</span>
              <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">tService</span><span class="o">.</span><span class="na">updateTodoContent</span><span class="o">(</span><span class="n">value</span><span class="o">,</span> <span class="n">seq</span><span class="o">);</span>
              <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="o">(</span><span class="nc">HttpStatus</span><span class="o">)</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"code"</span><span class="o">));</span>
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
              <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"stauts"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"type은 status, content 둘 중 한가지만 가능합니다"</span><span class="o">);</span>
              <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
                
          <span class="o">}</span>
      <span class="o">}</span>
      <span class="c1">// @DeleteMapping("/delete")</span>
      <span class="c1">// @Transactional</span>
      <span class="c1">// public ResponseEntity&lt;Object&gt; deleteTodo(@RequestParam Long seq, @RequestParam Long miSeq){</span>
      <span class="c1">//     Map&lt;String, Object&gt; map = tService.deleteTodo(seq, miSeq);</span>
      <span class="c1">//     return new ResponseEntity&lt;&gt;(map, (HttpStatus)map.get("code"));</span>
      <span class="c1">// }</span>
      <span class="nd">@DeleteMapping</span><span class="o">(</span><span class="s">"/delete"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">deleteTodo</span><span class="o">(</span><span class="nd">@RequestParam</span> <span class="nc">Long</span> <span class="n">seq</span><span class="o">,</span> <span class="nc">HttpSession</span> <span class="n">session</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">tService</span><span class="o">.</span><span class="na">deleteTodo</span><span class="o">(</span><span class="n">seq</span><span class="o">,</span> <span class="n">session</span><span class="o">);</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="o">(</span><span class="nc">HttpStatus</span><span class="o">)</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"code"</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/list/term"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">getDetailTodoList</span><span class="o">(</span><span class="nc">HttpSession</span> <span class="n">session</span><span class="o">,</span> <span class="nc">String</span> <span class="n">start</span><span class="o">,</span> <span class="nc">String</span> <span class="n">end</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">tService</span><span class="o">.</span><span class="na">selectTodoListByTrem</span><span class="o">(</span><span class="n">session</span><span class="o">,</span> <span class="n">start</span><span class="o">,</span> <span class="n">end</span><span class="o">);</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="o">(</span><span class="nc">HttpStatus</span><span class="o">)</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"code"</span><span class="o">));</span>
      <span class="o">}</span>
        
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <pre><code class="language-HTML">  ###제품 추가
  PUT http://localhost:9988/api/member/join HTTP/1.1
  content-type : application/json
    
  {
      "email" : "user002@service.com",
      "pwd" : "1234",
      "name" : "사용자2",
      "birth" : "2022-12-14T00:00:00",
      "regDt" : "2022-12-14T00:00:00"
  }
  ###로그인
  POST http://localhost:9988/api/member/login HTTP/1.1
  content-type : application/json
    
  {
      "email" : "user001@service.com",
      "pwd" : "1234"
  }
    
  ##\#Todo 등록
  PUT http://localhost:9988/api/todo/add HTTP/1.1
  content-type : application/json
    
  {
      "content" : "Todo5",
      "status" : 1,
      "startDt" : "2022-12-30T00:00:00",
      "endDt" : "2022-12-30T00:00:00"
  }
  ###내 TodoList 조회
  GET http://localhost:9988/api/todo/list HTTP/1.1
    
  ##\#Todo 내용 수정
  PATCH  http://localhost:9988/api/todo/update/content?&amp;value=sssss&amp;seq=1 HTTP/1.1
  ##\#Todo 상태 변경
  PATCH  http://localhost:9988/api/todo/update/status?&amp;value=2&amp;seq=1 HTTP/1.1
  ##\#Todo 삭제
  DELETE http://localhost:9988/api/todo/delete?seq=3 HTTP/1.1
  ##\#Todo 날짜범위 조회
  GET http://localhost:9988/api/todo/list/term?start=221226&amp;end=221230 HTTP/1.1
</code></pre>

    <p>restClient 사용 링크</p>
  </li>
  <li>
    <p>파일관리</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.todoList.entity</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
    
  <span class="nd">@Data</span>
  <span class="nd">@AllArgsConstructor</span>
  <span class="nd">@NoArgsConstructor</span>
  <span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"todo_images_info"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoImageEntity</span> <span class="o">{</span>
      <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"tii_seq"</span><span class="o">)</span>       <span class="kd">private</span> <span class="nc">Long</span> <span class="n">seq</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"tii_ti_seq"</span><span class="o">)</span>    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">tiSeq</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"tii_file_name"</span><span class="o">)</span> <span class="kd">private</span> <span class="nc">String</span> <span class="n">fileName</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"tii_uri"</span><span class="o">)</span>       <span class="kd">private</span> <span class="nc">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.member.entity</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
    
  <span class="nd">@Data</span>
  <span class="nd">@AllArgsConstructor</span>
  <span class="nd">@NoArgsConstructor</span>
  <span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"member_images_info"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberImageEntity</span> <span class="o">{</span>
      <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"mii_seq"</span><span class="o">)</span>       <span class="kd">private</span> <span class="nc">Long</span> <span class="n">seq</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"mii_mi_seq"</span><span class="o">)</span>    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">miSeq</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"mii_file_name"</span><span class="o">)</span> <span class="kd">private</span> <span class="nc">String</span> <span class="n">fileName</span><span class="o">;</span>
      <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"mii_uri"</span><span class="o">)</span>       <span class="kd">private</span> <span class="nc">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.member.repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.entity.MemberImageEntity</span><span class="o">;</span>
    
  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MemberImageRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">MemberImageEntity</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
      <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">MemberImageEntity</span><span class="o">&gt;</span> <span class="nf">findByMiSeq</span><span class="o">(</span><span class="nc">Long</span> <span class="n">miSeq</span><span class="o">);</span>
      <span class="c1">//select * from todo_image_info where tii_uri = uri order by tii_seq desc limit 1;</span>
      <span class="c1">//가장 나중에 입력된 이미지를 가져옴.</span>
      <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">MemberImageEntity</span><span class="o">&gt;</span> <span class="nf">findTopByUriOrderBySeqDesc</span><span class="o">(</span><span class="nc">String</span> <span class="n">uri</span><span class="o">);</span>
        
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.todoList.repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.todoList.entity.TodoImageEntity</span><span class="o">;</span>
    
  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TodoImageRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">TodoImageEntity</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
      <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TodoImageEntity</span><span class="o">&gt;</span> <span class="nf">findByTiSeq</span><span class="o">(</span><span class="nc">Long</span> <span class="n">tiSeq</span><span class="o">);</span>
      <span class="c1">//select * from todo_image_info where tii_uri = uri order by tii_seq desc limit 1;</span>
      <span class="c1">//가장 나중에 입력된 이미지를 가져옴.</span>
      <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TodoImageEntity</span><span class="o">&gt;</span> <span class="nf">findTopByUriOrderBySeqDesc</span><span class="o">(</span><span class="nc">String</span> <span class="n">uri</span><span class="o">);</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>  <span class="nd">@Autowired</span> <span class="nc">TodoImageRepository</span> <span class="n">tiRepo</span><span class="o">;</span>
    
      <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span>  <span class="nf">addTodoImage</span><span class="o">(</span><span class="nc">TodoImageEntity</span> <span class="n">data</span><span class="o">,</span> <span class="nc">Long</span> <span class="n">tiSeq</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
          <span class="n">data</span><span class="o">.</span><span class="na">setTiSeq</span><span class="o">(</span><span class="n">tiSeq</span><span class="o">);</span>
          <span class="n">tiRepo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"이미지가 저장되었습니다."</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
          <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
      <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>  <span class="nd">@Autowired</span> <span class="nc">MemberImageRepository</span> <span class="n">mi_repo</span><span class="o">;</span>
        
      <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span>  <span class="nf">addMemberImage</span><span class="o">(</span><span class="nc">MemberImageEntity</span> <span class="n">data</span><span class="o">,</span> <span class="nc">Long</span> <span class="n">miSeq</span><span class="o">){</span>
          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
          <span class="n">data</span><span class="o">.</span><span class="na">setMiSeq</span><span class="o">(</span><span class="n">miSeq</span><span class="o">);</span>
          <span class="n">mi_repo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"이미지가 저장되었습니다."</span><span class="o">);</span>
          <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
          <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getFileNameByUri</span><span class="o">(</span><span class="nc">String</span> <span class="n">uri</span><span class="o">){</span>
          <span class="nc">List</span><span class="o">&lt;</span><span class="nc">MemberImageEntity</span><span class="o">&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">mi_repo</span><span class="o">.</span><span class="na">findTopByUriOrderBySeqDesc</span><span class="o">(</span><span class="n">uri</span><span class="o">);</span>
          <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">getFileName</span><span class="o">();</span>
      <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.jh_project.todo.todoList.file.api</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.net.URLEncoder</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.nio.file.Files</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.nio.file.Path</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.nio.file.StandardCopyOption</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.Calendar</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.LinkedHashMap</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Value</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.core.io.Resource</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.core.io.UrlResource</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.HttpHeaders</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.MediaType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PutMapping</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestPart</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.multipart.MultipartFile</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.entity.MemberImageEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.member.service.MemberService</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.todoList.entity.TodoImageEntity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">com.jh_project.todo.todoList.service.TodoInfoService</span><span class="o">;</span>
    
  <span class="nd">@RestController</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileAPIController</span> <span class="o">{</span>
      <span class="c1">// 파일 업로드, 다운로드는 어느 프로젝프든 거의 동일함. 복붙추천</span>
      <span class="nd">@Value</span><span class="o">(</span><span class="s">"${file.image.todo}"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">todo_img_path</span><span class="o">;</span> <span class="c1">//springframework.beans임</span>
      <span class="nd">@Value</span><span class="o">(</span><span class="s">"${file.image.member}"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">member_img_path</span><span class="o">;</span>
      <span class="c1">//이것도 DI임. 이미지 파일의 경로가 바뀌어도 application.properties만 고쳐주면 됨</span>
      <span class="nd">@Autowired</span> <span class="nc">TodoInfoService</span> <span class="n">tService</span><span class="o">;</span>
      <span class="nd">@Autowired</span> <span class="nc">MemberService</span> <span class="n">mService</span><span class="o">;</span>
    
      <span class="nd">@PutMapping</span><span class="o">(</span><span class="s">"/{type}/upload"</span><span class="o">)</span> <span class="c1">//todo이미지를 올릴것인지 file이미지를 올릴것인지</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="o">&lt;</span> <span class="nc">Object</span> <span class="o">&gt;</span> <span class="n">putImageUpload</span><span class="o">(</span>
          <span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span>
          <span class="nd">@RequestPart</span> <span class="nc">MultipartFile</span> <span class="n">file</span><span class="o">,</span> <span class="c1">//파일을 받는 객체. postman에 file이라고 변수 그대로 적어주어야함</span>
          <span class="nd">@RequestParam</span> <span class="nc">Long</span> <span class="n">seq</span>
      <span class="o">)</span> <span class="o">{</span>
          <span class="nc">Map</span> <span class="o">&lt;</span> <span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span> <span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span> <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="o">();</span>
          <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getOriginalFilename</span><span class="o">());</span> <span class="c1">//업로드 할 파일의 원본이름 확장자까지 출력</span>
          <span class="c1">//Path - 폴더 및 파일의 위치를 나타내는 객체, Paths - 폴더 및 파일을 가져오고 경로를 만들기 위한 파일 유틸리티 클래스</span>
          <span class="nc">Path</span> <span class="n">folderLocation</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">//todo_img_path 문자열로부터 실제 폴더 경로를 가져옴.</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"todo"</span><span class="o">))</span> <span class="o">{</span>
              <span class="n">folderLocation</span> <span class="o">=</span> <span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">todo_img_path</span><span class="o">);</span>
    
          <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"member"</span><span class="o">))</span> <span class="o">{</span>
              <span class="n">folderLocation</span> <span class="o">=</span> <span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member_img_path</span><span class="o">);</span>
          <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
              <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"타입정보가 잘못되었습니다. ex:/todo/upload, /member/upload"</span><span class="o">);</span>
              <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span> <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="o">(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="nc">String</span> <span class="n">originFileName</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">getOriginalFilename</span><span class="o">();</span>
          <span class="nc">String</span><span class="o">[]</span> <span class="n">split</span> <span class="o">=</span> <span class="n">originFileName</span><span class="o">.</span><span class="na">split</span><span class="o">((</span><span class="s">"\\."</span><span class="o">));</span> <span class="c1">//.을 기준으로 나눔</span>
          <span class="nc">String</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">split</span><span class="o">[</span><span class="n">split</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">];</span> <span class="c1">//확장자</span>
          <span class="nc">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
          <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">split</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
              <span class="n">fileName</span> <span class="o">+=</span> <span class="n">split</span><span class="o">[</span><span class="n">i</span><span class="o">];</span> <span class="c1">//원래 split[i]+"." 이렇게 해줘야함</span>
          <span class="o">}</span>
          <span class="nc">String</span> <span class="n">saveFileName</span> <span class="o">=</span> <span class="n">type</span> <span class="o">+</span> <span class="s">"_"</span><span class="o">;</span> <span class="c1">//보통 원본 이름을 저장하는것이아니라 시간대를 입력함</span>
          <span class="nc">Calendar</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
          <span class="n">saveFileName</span> <span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="na">getTimeInMillis</span><span class="o">()</span> <span class="o">+</span> <span class="s">"."</span> <span class="o">+</span> <span class="n">ext</span><span class="o">;</span> <span class="c1">// todo_161310135.png 이런식으로 저장됨</span>
    
          <span class="nc">Path</span> <span class="n">targetFile</span> <span class="o">=</span> <span class="n">folderLocation</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span><span class="n">saveFileName</span><span class="o">);</span> <span class="c1">//폴더 경로와 파일의 이름을 합쳐서 목표 파일의 경로 생성</span>
          <span class="k">try</span> <span class="o">{</span>
              <span class="c1">//Files는 파일 처리에 대한 유틸리티 클래스</span>
              <span class="c1">//copy - 복사, file.getInputStream() - 파일을 열어서 파일의 내용을 읽는 준비</span>
              <span class="c1">//targetFile 경로로, standardCopyOption.REPLACE_EXISTING - 같은 파일이 있다면 덮어쓰기.</span>
              <span class="nc">Files</span><span class="o">.</span><span class="na">copy</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="n">targetFile</span><span class="o">,</span> <span class="nc">StandardCopyOption</span><span class="o">.</span><span class="na">REPLACE_EXISTING</span><span class="o">);</span>
          <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
              <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
          <span class="o">}</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"todo"</span><span class="o">))</span> <span class="o">{</span>
              <span class="nc">TodoImageEntity</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TodoImageEntity</span><span class="o">();</span>
              <span class="n">data</span><span class="o">.</span><span class="na">setFileName</span><span class="o">(</span><span class="n">saveFileName</span><span class="o">);</span>
              <span class="n">data</span><span class="o">.</span><span class="na">setUri</span><span class="o">(</span><span class="n">fileName</span><span class="o">);</span>
              <span class="n">tService</span><span class="o">.</span><span class="na">addTodoImage</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">seq</span><span class="o">);</span>
          <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"member"</span><span class="o">))</span> <span class="o">{</span>
              <span class="nc">MemberImageEntity</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MemberImageEntity</span><span class="o">();</span>
              <span class="n">data</span><span class="o">.</span><span class="na">setFileName</span><span class="o">(</span><span class="n">saveFileName</span><span class="o">);</span>
              <span class="n">data</span><span class="o">.</span><span class="na">setUri</span><span class="o">(</span><span class="n">fileName</span><span class="o">);</span>
              <span class="n">mService</span><span class="o">.</span><span class="na">addMemberImage</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">seq</span><span class="o">);</span>
    
          <span class="o">}</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span> <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="o">(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
      <span class="o">}</span> <span class="c1">//파일 업로드 메소드</span>
    
      <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/images/{type}/{uri}"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="nf">getImage</span><span class="o">(</span>
          <span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">uri</span><span class="o">,</span> <span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span>
          <span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">type</span>
      <span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
          <span class="c1">// todo_img_path 문자열로부터 실제 폴더 경로를 가져온다. </span>
          <span class="nc">Path</span> <span class="n">folderLocation</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"todo"</span><span class="o">))</span> <span class="o">{</span>
              <span class="n">folderLocation</span> <span class="o">=</span> <span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">todo_img_path</span><span class="o">);</span>
          <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"member"</span><span class="o">))</span> <span class="o">{</span>
              <span class="n">folderLocation</span> <span class="o">=</span> <span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member_img_path</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="nc">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"todo"</span><span class="o">))</span> <span class="o">{</span>
              <span class="n">filename</span> <span class="o">=</span> <span class="n">tService</span><span class="o">.</span><span class="na">getFileNameByUri</span><span class="o">(</span><span class="n">uri</span><span class="o">);</span>
          <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"member"</span><span class="o">))</span> <span class="o">{</span>
              <span class="n">filename</span> <span class="o">=</span> <span class="n">mService</span><span class="o">.</span><span class="na">getFileNameByUri</span><span class="o">(</span><span class="n">uri</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="nc">String</span><span class="o">[]</span> <span class="n">split</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">"\\."</span><span class="o">);</span>
          <span class="nc">String</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">split</span><span class="o">[</span><span class="n">split</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">];</span>
          <span class="nc">String</span> <span class="n">exportName</span> <span class="o">=</span> <span class="n">uri</span> <span class="o">+</span> <span class="s">"."</span> <span class="o">+</span> <span class="n">ext</span><span class="o">;</span>
          <span class="c1">// 내보낼 파일의 이름을 만든다. </span>
          <span class="c1">// 폴더 경로와 파일의 이름을 합쳐서 목표 파일의 경로를 만든다. </span>
          <span class="nc">Path</span> <span class="n">targetFile</span> <span class="o">=</span> <span class="n">folderLocation</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span>
          <span class="c1">// 다운로드 가능한 형태로 변환하기 위한 Resource 객체 생성 </span>
          <span class="nc">Resource</span> <span class="n">r</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
          <span class="k">try</span> <span class="o">{</span>
              <span class="c1">// 일반파일 -&gt; Url로 첨부 가능한 형태로 변환 </span>
              <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UrlResource</span><span class="o">(</span><span class="n">targetFile</span><span class="o">.</span><span class="na">toUri</span><span class="o">());</span>
          <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
              <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
          <span class="o">}</span>
          <span class="c1">// 첨부된 파일의 타입을 저장하기위한 변수 생성 </span>
          <span class="nc">String</span> <span class="n">contentType</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
          <span class="k">try</span> <span class="o">{</span>
              <span class="c1">// 첨부할 파일의 타입 정보 산출 </span>
              <span class="n">contentType</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getServletContext</span><span class="o">().</span><span class="na">getMimeType</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">getFile</span><span class="o">().</span><span class="na">getAbsolutePath</span><span class="o">());</span>
              <span class="c1">// 산출한 파일의 타입이 null 이라면 </span>
              <span class="k">if</span> <span class="o">(</span><span class="n">contentType</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                  <span class="c1">// 일반 파일로 처리한다. </span>
                  <span class="n">contentType</span> <span class="o">=</span> <span class="s">"application/octet-stream"</span><span class="o">;</span>
              <span class="o">}</span>
          <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
              <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
          <span class="o">}</span>
          <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">()</span>
              <span class="c1">// 응답의 코드를 200 OK로 설정하고 </span>
              <span class="c1">// 산출한 타입을 응답에 맞는 형태로 변환 </span>
              <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">parseMediaType</span><span class="o">(</span><span class="n">contentType</span><span class="o">))</span>
              <span class="c1">// 내보낼 내용의 타입을 설정 (파일), </span>
              <span class="c1">// attachment; filename*=\""+r.getFilename()+"\" 요청한 쪽에서 다운로드 한 </span>
              <span class="c1">// 파일의 이름을 결정 </span>
              <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="nc">HttpHeaders</span><span class="o">.</span><span class="na">CONTENT_DISPOSITION</span><span class="o">,</span> <span class="s">"attachment; filename=\""</span> <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">exportName</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">)</span> <span class="o">+</span> <span class="s">"\""</span><span class="o">)</span>
              <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">r</span><span class="o">);</span>
          <span class="c1">// 변환된 파일을 ResponseEntity에 추가 }</span>
    
    
    
      <span class="o">}</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div>    </div>
  </li>
</ul>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/jpa/">JPA</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/jpa/"
            class="post-tag no-text-decoration"
          >jpa</a>
        
          <a
            href="/tags/%EA%B5%AD%EB%B9%84%EA%B5%90%EC%9C%A1/"
            class="post-tag no-text-decoration"
          >국비교육</a>
        
          <a
            href="/tags/spring/"
            class="post-tag no-text-decoration"
          >spring</a>
        
          <a
            href="/tags/orm/"
            class="post-tag no-text-decoration"
          >ORM</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">공유하기</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=[%EA%B5%AD%EB%B9%84%EA%B5%90%EC%9C%A1%ED%95%99%EC%9B%90-%EC%88%98%EC%97%85%EB%82%B4%EC%9A%A9%EC%A0%95%EB%A6%AC]%20JPA2%20-%20%ED%9E%88%ED%9E%88&url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Fgreen_jpa2%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=[%EA%B5%AD%EB%B9%84%EA%B5%90%EC%9C%A1%ED%95%99%EC%9B%90-%EC%88%98%EC%97%85%EB%82%B4%EC%9A%A9%EC%A0%95%EB%A6%AC]%20JPA2%20-%20%ED%9E%88%ED%9E%88&u=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Fgreen_jpa2%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Fgreen_jpa2%2F&text=[%EA%B5%AD%EB%B9%84%EA%B5%90%EC%9C%A1%ED%95%99%EC%9B%90-%EC%88%98%EC%97%85%EB%82%B4%EC%9A%A9%EC%A0%95%EB%A6%AC]%20JPA2%20-%20%ED%9E%88%ED%9E%88" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="링크 복사하기"
      data-title-succeed="링크가 복사되었습니다!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>
<div id="giscus">
    <script src="https://giscus.app/client.js"
            data-repo="nunnunnu/nunnunnu.github.io"
            data-repo-id="R_kgDOMWEGow"
            data-category="Comments"
            data-category-id="DIC_kwDOMWEGo84ChY2C"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="bottom"
            data-theme="noborder_light"
            data-lang="ko"
            crossorigin="anonymous"
            async>
    </script>
</div>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">최근 업데이트</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/%EC%8A%A4%ED%94%84%EB%A7%81MVC%EA%B8%B0%EB%B3%B8%EA%B8%B0%EB%8A%A5/">[김영한 스프링 MVC 1] 스프링 MVC 기본기능</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/green_jpa/">[국비교육학원-수업내용정리] JPA</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/%EC%9B%B9%ED%8E%98%EC%9D%B4%EC%A7%80%EC%83%9D%EC%84%B1/">[국비교육학원-수업내용정리] 웹페이지 생성</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/%EC%98%88%EC%99%B8%EC%B2%98%EB%A6%AC/">자바의 정석 강의 - 예외처리</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/%EB%82%A0%EC%A7%9C%EC%99%80-%EC%8B%9C%EA%B0%84-&-%ED%98%95%EC%8B%9D%ED%99%94/">자바의 정석 강의 - 날짜와 시간 & 형식화</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">인기 태그</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/spring/">spring</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/java/">java</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/jpa/">jpa</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/orm/">ORM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94%EC%9D%98%EC%A0%95%EC%84%9D/">자바의정석</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B5%AD%EB%B9%84%EA%B5%90%EC%9C%A1/">국비교육</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%80%EC%98%81%ED%95%9C%EC%8A%A4%ED%94%84%EB%A7%81%ED%95%B5%EC%8B%AC%EC%9B%90%EB%A6%AC-%EA%B3%A0%EA%B8%89/">김영한스프링핵심원리-고급</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C/">연습문제</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%80%EC%98%81%ED%95%9C%EC%9E%90%EB%B0%94orm%ED%91%9C%EC%A4%80jpa/">김영한자바ORM표준JPA</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/mvc/">mvc</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="d-none ps-0 pe-4">
    <h2 class="panel-heading ps-3 mb-2">바로가기</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">관련된 글</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/green_jpa/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1670425200"
  data-df="YYYY/MM/DD"
  
>
  2022/12/08
</time>

              <h4 class="pt-0 my-2">[국비교육학원-수업내용정리] JPA</h4>
              <div class="text-muted">
                <p>생성후 sql DB생성

package com.greenart.dbconnect.api;

import java.util.Date;
import java.util.LinkedHashMap;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
impor...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/jpql/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1671116400"
  data-df="YYYY/MM/DD"
  
>
  2022/12/16
</time>

              <h4 class="pt-0 my-2">[국비교육학원-수업내용정리] jpql</h4>
              <div class="text-muted">
                <p>sql문 지정방법 - @Query 어노테이션 사용


(오타가 하나라도 있으면 리포지토리가 생성이 안됨)

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
package com.nunnunnu.jpql.entity;

import javax.persistence.Column;
import...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/OSIV%EC%99%80_%EC%84%B1%EB%8A%A5_%EC%B5%9C%EC%A0%81%ED%99%94/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1673622000"
  data-df="YYYY/MM/DD"
  
>
  2023/01/14
</time>

              <h4 class="pt-0 my-2">[김영한 실전! 스프링 부트와 JPA 활용2] OSIV와 성능 최적화</h4>
              <div class="text-muted">
                <p>Open Session In View : 하이버네이트
  Open EntityManage In View : JPA
  spring.jpa.open-in-view : true 기본값 - OSIV ON 상태




트랜젝션 범위를 벗어나도 영속성 컨텍스트가 살아있음. 모든 작업이 끝날때까지 살아있다고 이해하면될거같음.
실시간 트래픽이 중요한 애플리케이션에...</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/AOP/"
      class="btn btn-outline-primary"
      aria-label="이전 글"
    >
      <p>[김영한 스프링 입문] AOP</p>
    </a>
  

  
    <a
      href="/posts/jpql/"
      class="btn btn-outline-primary"
      aria-label="다음 글"
    >
      <p>[국비교육학원-수업내용정리] jpql</p>
    </a>
  
</nav>

            
              
              <!-- The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2024</time>

    
      <a href="https://github.com/username">jinny</a>.
    

    
  </p>

  <p>
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">인기 태그</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/spring/">spring</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/java/">java</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/jpa/">jpa</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/orm/">ORM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94%EC%9D%98%EC%A0%95%EC%84%9D/">자바의정석</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B5%AD%EB%B9%84%EA%B5%90%EC%9C%A1/">국비교육</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%80%EC%98%81%ED%95%9C%EC%8A%A4%ED%94%84%EB%A7%81%ED%95%B5%EC%8B%AC%EC%9B%90%EB%A6%AC-%EA%B3%A0%EA%B8%89/">김영한스프링핵심원리-고급</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C/">연습문제</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%80%EC%98%81%ED%95%9C%EC%9E%90%EB%B0%94orm%ED%91%9C%EC%A4%80jpa/">김영한자바ORM표준JPA</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/mvc/">mvc</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">새 버전의 콘텐츠를 사용할 수 있습니다.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      업데이트
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->
    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/ko.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.29.0/dist/tocbot.min.js"></script>







<script src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  







    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

