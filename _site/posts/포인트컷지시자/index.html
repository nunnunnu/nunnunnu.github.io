<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="ko-KR" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="[김영한 스프링 핵심원리 - 고급] 포인트 컷 지시자" />
<meta property="og:locale" content="ko_KR" />
<meta name="description" content="에스팩트J가 제공하는 포인트컷 표현식(pointcut expression)을 포인트컷 표현식이라고 부른다." />
<meta property="og:description" content="에스팩트J가 제공하는 포인트컷 표현식(pointcut expression)을 포인트컷 표현식이라고 부른다." />
<link rel="canonical" href="http://localhost:4000/posts/%ED%8F%AC%EC%9D%B8%ED%8A%B8%EC%BB%B7%EC%A7%80%EC%8B%9C%EC%9E%90/" />
<meta property="og:url" content="http://localhost:4000/posts/%ED%8F%AC%EC%9D%B8%ED%8A%B8%EC%BB%B7%EC%A7%80%EC%8B%9C%EC%9E%90/" />
<meta property="og:site_name" content="히히" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-02-25T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[김영한 스프링 핵심원리 - 고급] 포인트 컷 지시자" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-02-25T00:00:00+09:00","datePublished":"2024-02-25T00:00:00+09:00","description":"에스팩트J가 제공하는 포인트컷 표현식(pointcut expression)을 포인트컷 표현식이라고 부른다.","headline":"[김영한 스프링 핵심원리 - 고급] 포인트 컷 지시자","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/%ED%8F%AC%EC%9D%B8%ED%8A%B8%EC%BB%B7%EC%A7%80%EC%8B%9C%EC%9E%90/"},"url":"http://localhost:4000/posts/%ED%8F%AC%EC%9D%B8%ED%8A%B8%EC%BB%B7%EC%A7%80%EC%8B%9C%EC%9E%90/"}</script>
<!-- End Jekyll SEO tag -->


  <title>[김영한 스프링 핵심원리 - 고급] 포인트 컷 지시자 | 히히
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="히히">
<meta name="application-name" content="히히">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.29.0/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      let self = this;this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          self.clearMode();
        }
        self.notify();
      });

      if (!this.hasMode) {
        return;
      }

      if (this.isDarkMode) {
        this.setDark();
      } else {
        this.setLight();
      }
    }

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isPreferDark() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }get modeStatus() {
      if (this.hasMode) {
        return this.mode;
      } else {
        return this.isPreferDark ? ModeToggle.DARK_MODE : ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        this.clearMode();
      } else {
        if (this.isPreferDark) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    }
  }

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/portfolio.jpeg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">히히</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">바보등장</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>홈</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>카테고리</span>
            
              <span>(158)</span>
            
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>태그</span>
            
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>아카이브</span>
            
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>정보</span>
            
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/nunnunnu"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['nod15277','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">홈</a>
            </span>

          
        
          
        
          
            
              <span>[김영한 스프링 핵심원리 - 고급] 포인트 컷 지시자</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      포스트
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="검색..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">취소</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>[김영한 스프링 핵심원리 - 고급] 포인트 컷 지시자</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        게시
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1708786800"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2024/02/25
</time>

      </span>

      <!-- lastmod date -->
      
        <span>
          업데이트
          <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1708819200"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2024/02/25
</time>

        </span>
      
      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://github.com/username">jinny</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="4089 단어"
>
  <em>22 분</em>읽는 시간</span>

        </div>
      </div>
    </div>
  </header>

  <div class="content">
    <p>에스팩트J가 제공하는 포인트컷 표현식(pointcut expression)을 포인트컷 표현식이라고 부른다.</p>

<p>포인트컷 표현식은 execution같은 포인트컷 지시자(pointcut Designator)로 시작 해 PCD라 부른다</p>

<ul>
  <li>포인트컷 지시자(pointcut Designator)
    <ul>
      <li>execution : 메소드 실행 조인 포인트 매칭, 스프링 AOP에서 가장 많이 사용하고 기능도 복잡</li>
      <li>within : 특정 타입내 조인포인트를 매칭</li>
      <li>args : 인자가 주어진 타입의 인스턴스인 조인포인트</li>
      <li>this : 스프링 빈 객체(스프링 AOP 프록시)를 대상으로 하는 조인포인트)</li>
      <li>target : Target객체(스프링AOP가 가르키는 실제대상)를 대상으로하는 조인포인트</li>
      <li>@target : 실행 객체의 클래스에 주어진 타입의 어노트에션이있는 조인트를 매칭</li>
      <li>@within: 주어진 어노테이션이있는 타입 내 조인포인트</li>
      <li>@annotation : 메서드가 주어진 어노테이션을 가지고잇는 조인포인트를 매칭</li>
      <li>@args : 전달된 실제인수의 런타임 타입이 주어진 타입의 어노테이션을 갖는 조인포인트</li>
      <li>bean : 스프링 전용 포인트컷 지시자, 빈의 이름으로 포인트컷을 지정</li>
    </ul>
  </li>
  <li>
    <p>기본 구조</p>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">hello.aop.member.annotation</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.lang.annotation.ElementType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.lang.annotation.Retention</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.lang.annotation.RetentionPolicy</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.lang.annotation.Target</span><span class="o">;</span>
    
  <span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">)</span>
  <span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">MethodAop</span> <span class="o">{</span>
  	<span class="nc">String</span> <span class="nf">value</span><span class="o">();</span>
  <span class="o">}</span>
    
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">hello.aop.member.annotation</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.lang.annotation.ElementType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.lang.annotation.Retention</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.lang.annotation.RetentionPolicy</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.lang.annotation.Target</span><span class="o">;</span>
    
  <span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">)</span>
  <span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">ClassAop</span> <span class="o">{</span>
    
  <span class="o">}</span>
    
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">hello.aop.member</span><span class="o">;</span>
    
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MemberService</span> <span class="o">{</span>
  	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">hello</span><span class="o">(</span><span class="nc">String</span> <span class="n">param</span><span class="o">);</span>
  <span class="o">}</span>
    
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">hello.aop.member</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">hello.aop.member.annotation.MethodAop</span><span class="o">;</span>
    
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberServiceImpl</span> <span class="kd">implements</span> <span class="nc">MemberService</span> <span class="o">{</span>
  	<span class="nd">@Override</span>
  	<span class="nd">@MethodAop</span><span class="o">(</span><span class="s">"test value"</span><span class="o">)</span>
  	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">hello</span><span class="o">(</span><span class="nc">String</span> <span class="n">param</span><span class="o">)</span> <span class="o">{</span>
  		<span class="k">return</span> <span class="s">"OK"</span><span class="o">;</span>
  	<span class="o">}</span>
    
  	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">internal</span><span class="o">(</span><span class="nc">String</span> <span class="n">param</span><span class="o">)</span> <span class="o">{</span>
  		<span class="k">return</span> <span class="s">"OK"</span><span class="o">;</span>
  	<span class="o">}</span>
  <span class="o">}</span>
    
</pre></td></tr></tbody></table></code></div>    </div>

    <div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">hello.aop.pointcut</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.BeforeEach</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.aop.aspectj.AspectJExpressionPointcut</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">hello.aop.member.MemberServiceImpl</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>
    
  <span class="nd">@Slf4j</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExecutionTest</span> <span class="o">{</span>
  	<span class="nc">AspectJExpressionPointcut</span> <span class="n">pointcut</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AspectJExpressionPointcut</span><span class="o">();</span>
  	<span class="nc">Method</span> <span class="n">helloMethod</span><span class="o">;</span>
    
  	<span class="nd">@BeforeEach</span>
  	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">NoSuchMethodException</span> <span class="o">{</span>
  		<span class="n">helloMethod</span> <span class="o">=</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"hello"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  	<span class="o">}</span>
    
  	<span class="nd">@Test</span>
  	<span class="kt">void</span> <span class="nf">printMethod</span><span class="o">()</span> <span class="o">{</span>
  		<span class="c1">//helloMethod=public java.lang.String hello.aop.member.MemberServiceImpl.hello(java.lang.String)</span>
  		<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"helloMethod={}"</span><span class="o">,</span> <span class="n">helloMethod</span><span class="o">);</span>
  	<span class="o">}</span>
  <span class="o">}</span>
    
</pre></td></tr></tbody></table></code></div>    </div>
  </li>
</ul>

<h3 id="execution"><span class="me-2">execution</span><a href="#execution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">hello.aop.pointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">assertj</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.*;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.assertj.core.api.Assertions</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.BeforeEach</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.aop.aspectj.AspectJExpressionPointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">hello.aop.member.MemberServiceImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExecutionTest</span> <span class="o">{</span>
	<span class="nc">AspectJExpressionPointcut</span> <span class="n">pointcut</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AspectJExpressionPointcut</span><span class="o">();</span>
	<span class="nc">Method</span> <span class="n">helloMethod</span><span class="o">;</span>

	<span class="nd">@BeforeEach</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">NoSuchMethodException</span> <span class="o">{</span>
		<span class="n">helloMethod</span> <span class="o">=</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"hello"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">printMethod</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">//helloMethod=public java.lang.String hello.aop.member.MemberServiceImpl.hello(java.lang.String)</span>
		<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"helloMethod={}"</span><span class="o">,</span> <span class="n">helloMethod</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">exactMatch</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(public String hello.aop.member.MemberServiceImpl.hello(String))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>

	<span class="o">}</span>

	<span class="c1">//가장많이 생략한 포인트컷</span>
	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">allMatch</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* *(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>

	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">nameMatch</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* hello(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">nameMatchStar1</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* hell*(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">nameMatchStar2</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* *ll*(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">packageExactMethod1</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* hello.aop.member.MemberServiceImpl.hello(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">packageExactMethod2</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* hello.aop.member.*.*(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">packageExactFalse</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* hello.aop.*.*(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isFalse</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">packageExactSubPackage1</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* hello.aop..*.*(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">typeExactMatch</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* hello.aop.member.MemberServiceImpl.*(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">typeExactMatchSuperType</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* hello.aop.member.MemberService.*(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">typeMatchNoMatchSuperTypeMethodFalse</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">NoSuchMethodException</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* hello.aop.member.MemberService.*(..))"</span><span class="o">);</span>
		<span class="nc">Method</span> <span class="n">internal</span> <span class="o">=</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"internal"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">internal</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isFalse</span><span class="o">();</span> <span class="c1">//자식에는 있어도 부모 클래스에없는 메소드는 불가능</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">typeMatchInternal</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">NoSuchMethodException</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* hello.aop.member.MemberServiceImpl.*(..))"</span><span class="o">);</span>
		<span class="nc">Method</span> <span class="n">internal</span> <span class="o">=</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"internal"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">internal</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span> <span class="c1">//자식에는 있어도 부모 클래스에없는 메소드는 불가능</span>
	<span class="o">}</span>

	<span class="c1">//String타입의 파라미터</span>
	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">argsMatch</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* *(String))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="c1">//파라미터없음</span>
	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">argsMatchNoArgs</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* *())"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isFalse</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="c1">//파라미터가 하나 있으나 모든 타입 허용</span>
	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">argsMatchStar</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* *(*))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="c1">//파라미터 갯수와 무관하게 모든 파라미터, 모든 타입 허용</span>
	<span class="c1">//없음, 하나있음, 여러개있음 모두 허용</span>
	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">argsMatchAll</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* *(..))"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="c1">//첫 파라미터가 String이여야함(갯수제한X)</span>
	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">argsMatchString</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"execution(* *(String, ..))"</span><span class="o">);</span>
		<span class="c1">//갯수제한 두려면 *로해야함</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></div></div>

<h3 id="within"><span class="me-2">within</span><a href="#within" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">hello.aop.pointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">assertj</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.*;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.BeforeEach</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.DisplayName</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.aop.aspectj.AspectJExpressionPointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">hello.aop.member.MemberServiceImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WithinTest</span> <span class="o">{</span>
	<span class="nc">AspectJExpressionPointcut</span> <span class="n">pointcut</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AspectJExpressionPointcut</span><span class="o">();</span>
	<span class="nc">Method</span> <span class="n">helloMethod</span><span class="o">;</span>

	<span class="nd">@BeforeEach</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">NoSuchMethodException</span> <span class="o">{</span>
		<span class="n">helloMethod</span> <span class="o">=</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"hello"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">printMethod</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">//helloMethod=public java.lang.String hello.aop.member.MemberServiceImpl.hello(java.lang.String)</span>
		<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"helloMethod={}"</span><span class="o">,</span> <span class="n">helloMethod</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">withinMatch</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"within(hello.aop.member.MemberServiceImpl)"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>

	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">nameMatchStar1</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"within(hello.aop.member.*Service*)"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">withinSubPackage</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"within(hello.aop..*)"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"타켓의 타입에만 직접 적용, 인터페이스를 선정하면 안됨"</span><span class="o">)</span>
	<span class="kt">void</span> <span class="nf">withinSuperTypeFalse</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="s">"within(hello.aop.member.MemberService)"</span><span class="o">);</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isFalse</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></div></div>

<p>execution과는 다르게 부모클래스를 선언해서 자식클래스를 사용할 수 없다. execution보다는 제약이있어서 실무에서는 잘 사용하지않는다</p>

<h3 id="within-1"><span class="me-2">within</span><a href="#within-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">hello.aop.pointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">assertj</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.*;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.Member</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.assertj.core.api.Assertions</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.BeforeEach</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.aop.aspectj.AspectJExpressionPointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">hello.aop.member.MemberServiceImpl</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ArgsTest</span> <span class="o">{</span>
	<span class="nc">Method</span> <span class="n">helloMethod</span><span class="o">;</span>

	<span class="nd">@BeforeEach</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">NoSuchMethodException</span> <span class="o">{</span>
		<span class="n">helloMethod</span> <span class="o">=</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"hello"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">private</span> <span class="nc">AspectJExpressionPointcut</span> <span class="nf">pointcut</span><span class="o">(</span><span class="nc">String</span> <span class="n">expression</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">AspectJExpressionPointcut</span> <span class="n">pointcut</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AspectJExpressionPointcut</span><span class="o">();</span>
		<span class="n">pointcut</span><span class="o">.</span><span class="na">setExpression</span><span class="o">(</span><span class="n">expression</span><span class="o">);</span>
		<span class="k">return</span> <span class="n">pointcut</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">args</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">//hello(String)</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">(</span><span class="s">"args(String)"</span><span class="o">).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">(</span><span class="s">"args(Object)"</span><span class="o">).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">(</span><span class="s">"args()"</span><span class="o">).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isFalse</span><span class="o">();</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">(</span><span class="s">"args(..)"</span><span class="o">).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">(</span><span class="s">"args(*)"</span><span class="o">).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">(</span><span class="s">"args(String,..)"</span><span class="o">).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="c1">//execution(* *(java.io.Serializable)): 메서드의 시그니처로 판단(정적)</span>
	<span class="c1">//args(java.io.Serializable):런타임에 전달된 인수로 판단(동적)</span>
	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">argsVsExecution</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">//Args</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">((</span><span class="s">"args(String)"</span><span class="o">)).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">((</span><span class="s">"args(java.io.Serializable)"</span><span class="o">)).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">((</span><span class="s">"args(Object)"</span><span class="o">)).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>

		<span class="c1">//execution</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">((</span><span class="s">"execution(* *(String))"</span><span class="o">)).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isTrue</span><span class="o">();</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">((</span><span class="s">"execution(* *(java.io.Serializable))"</span><span class="o">)).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isFalse</span><span class="o">();</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="n">pointcut</span><span class="o">((</span><span class="s">"execution(* *(Object))"</span><span class="o">)).</span><span class="na">matches</span><span class="o">(</span><span class="n">helloMethod</span><span class="o">,</span> <span class="nc">MemberServiceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">isFalse</span><span class="o">();</span>

	<span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></div></div>

<p>execution보다 동적으로 파라미터 매핑이 편리한것을 확인할 수 있음. 그러나 실무에서 java.io.Serializable을 사용할 일이 별로없음</p>

<p>보통 단독으로사용하기보다는 파라미터 바인딩에서 주로 사용됨</p>

<h3 id="target-within"><span class="me-2">@target, @within</span><a href="#target-within" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>@target은 부모클래스의 메서드까지 어드바이저를 적용, @within은 자기자신의 클래스에 정의된 메서드에만 어드바이스를 적용</p>

<p><a href="/assets/images/high/Untitled.png" class="popup img-link  shimmer"><img src="/assets/images/high/Untitled.png" alt="images" loading="lazy"></a></p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">hello.aop.pointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.aspectj.lang.ProceedingJoinPoint</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Around</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Aspect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Import</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">hello.aop.member.annotation.ClassAop</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="nd">@Import</span><span class="o">({</span><span class="nc">AtTargetAtWithinTest</span><span class="o">.</span><span class="na">Config</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AtTargetAtWithinTest</span> <span class="o">{</span>
	<span class="nd">@Autowired</span>
	<span class="nc">Child</span> <span class="n">child</span><span class="o">;</span>

	<span class="nd">@ClassAop</span>
	<span class="kd">static</span> <span class="kd">class</span> <span class="nc">Child</span> <span class="kd">extends</span> <span class="nc">Parent</span> <span class="o">{</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">childMethod</span><span class="o">()</span> <span class="o">{}</span>
	<span class="o">}</span>

	<span class="kd">static</span> <span class="kd">class</span> <span class="nc">Parent</span> <span class="o">{</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">parentMethod</span><span class="o">()</span> <span class="o">{}</span>
	<span class="o">}</span>

	<span class="nd">@Aspect</span>
	<span class="kd">static</span> <span class="kd">class</span> <span class="nc">AtTargetAtWithinAspect</span> <span class="o">{</span>
		<span class="c1">//@target : 인스턴스를 기준으로 모든 메서드의 조인포인트를 선정, 부모타입의 메서드도 적용</span>
		<span class="nd">@Around</span><span class="o">(</span><span class="s">"execution(* hello.aop..*(..)) &amp;&amp; @target(hello.aop.member.annotation.ClassAop)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">atTarget</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[@target] {}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">());</span>
			<span class="k">return</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="c1">//within:선택된 클래스 내부에 있는 메서드만 조인 포인트로 선정, 부모타입의 메서드는 적용되지않음</span>
		<span class="nd">@Around</span><span class="o">(</span><span class="s">"execution(* hello.aop..*(..)) &amp;&amp; @within(hello.aop.member.annotation.ClassAop)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">atWithin</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[@within] {}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">());</span>
			<span class="k">return</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">static</span> <span class="kd">class</span> <span class="nc">Config</span> <span class="o">{</span>
		<span class="nd">@Bean</span>
		<span class="kd">public</span> <span class="nc">Parent</span> <span class="nf">parent</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">return</span> <span class="k">new</span> <span class="nf">Parent</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="nd">@Bean</span>
		<span class="kd">public</span> <span class="nc">Child</span> <span class="nf">child</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">return</span> <span class="k">new</span> <span class="nf">Child</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="nd">@Bean</span>
		<span class="kd">public</span> <span class="nc">AtTargetAtWithinAspect</span> <span class="nf">atTargetAtWithinAspect</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">return</span> <span class="k">new</span> <span class="nf">AtTargetAtWithinAspect</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">success</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"child proxy = {}"</span><span class="o">,</span> <span class="n">child</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
		<span class="n">child</span><span class="o">.</span><span class="na">childMethod</span><span class="o">();</span> <span class="c1">//부모 자식 모두있는 메서드</span>
		<span class="n">child</span><span class="o">.</span><span class="na">parentMethod</span><span class="o">();</span> <span class="c1">//부모에만있는메서드</span>
		<span class="cm">/*
		* 2024-02-25T14:58:07.861+09:00  INFO 49300 --- [    Test worker] h.aop.pointcut.AtTargetAtWithinTest      : child proxy = class hello.aop.pointcut.AtTargetAtWithinTest$Child$$SpringCGLIB$$0
		2024-02-25T14:58:07.887+09:00  INFO 49300 --- [    Test worker] h.aop.pointcut.AtTargetAtWithinTest      : [@target] void hello.aop.pointcut.AtTargetAtWithinTest$Child.childMethod()
		2024-02-25T14:58:07.889+09:00  INFO 49300 --- [    Test worker] h.aop.pointcut.AtTargetAtWithinTest      : [@within] void hello.aop.pointcut.AtTargetAtWithinTest$Child.childMethod()
		2024-02-25T14:58:07.891+09:00  INFO 49300 --- [    Test worker] h.aop.pointcut.AtTargetAtWithinTest      : [@target] void hello.aop.pointcut.AtTargetAtWithinTest$Parent.parentMethod()
		*/</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>로그를 보면 child는 부모, 자식 둘다 호출이되고 parent는 부모만 호출됨 == within에서는 AOP가 적용되지않음</p>

<p>이것도 단독으로는 잘 사용하지않고 파라미터 바인딩에 사용됨</p>

<blockquote>
  <p>[!NOTE]
💡 args, @args, @target는 단독으로 사용하면안된다
위 예제를 보면 execution(* hello.aop..*(..)) &amp; &amp; 로 적용대상의 모수를 먼저 줄인다음 해당 포인트컷지시자를 사용했음
위의 3가지 지시자는 실제 객체 인스턴스가 생성된 후 실행될때 어드바이스적용여부를 확인하기때문
그런데 <strong>실행시점에 일어나는 포인트컷적용여부도 결국 프록시가있어야 판단이 가능</strong>하다
그러나 스프링 컨테이너가 프록시를 생성하는시점은 스프링컨테이너가만들어지는 애플리케이션 로딩시점에 적용가능하다. 
결론은 위의 3가지 포인트컷지시자는 모든 스프링빈에 AOP를 적용하려고 시도함
문제는 모든 스프링빈에 aop프록시를 적용하려하면 스프링이 내부에서 사용하는 빈 중 final로 지정된 빈들에서 오류가발생함!
<strong>요약 : 실제 객체 인스턴스가 만들어지고 실제 런타임시점에 판단이 가능한데 프록시가 없으면 불가능해서 스프링이 프록시를 만들고봄. 이과정에서 문제가 발생함</strong> &gt;</p>

  <p>또한 final로 선언된 클래스는 프록시를 생성할 수 없음. 부모-자식 관계를 가질 수 없으므로 CGLIB 가 Proxy 클래스를 만들 수 없기 때문</p>
</blockquote>

<h3 id="annotation-args"><span class="me-2">@annotation, @args</span><a href="#annotation-args" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">hello.aop.pointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.aspectj.lang.ProceedingJoinPoint</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Around</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Aspect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Import</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">hello.aop.member.MemberService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">hello.aop.member.MemberServiceImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="nd">@SpringBootTest</span>
<span class="nd">@Import</span><span class="o">({</span><span class="nc">AtAnnotationTest</span><span class="o">.</span><span class="na">AtAnnotationAspect</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AtAnnotationTest</span> <span class="o">{</span>
	<span class="nd">@Autowired</span>
	<span class="nc">MemberService</span> <span class="n">memberService</span><span class="o">;</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">success</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"memberService proxy = {}"</span><span class="o">,</span> <span class="n">memberService</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
		<span class="n">memberService</span><span class="o">.</span><span class="na">hello</span><span class="o">(</span><span class="s">"helloA"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Aspect</span>
	<span class="kd">static</span> <span class="kd">class</span> <span class="nc">AtAnnotationAspect</span> <span class="o">{</span>
		<span class="nd">@Around</span><span class="o">(</span><span class="s">"@annotation(hello.aop.member.annotation.MethodAop)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">doAtAnnotation</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[@annoatation]{}"</span><span class="o">,</span><span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">());</span>
			<span class="k">return</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></div></div>

<p>@MethodAop가 붙은 메서드만 위의 어드바이스가 적용됨</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">hello.aop.member</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">hello.aop.member.annotation.MethodAop</span><span class="o">;</span>

<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberServiceImpl</span> <span class="kd">implements</span> <span class="nc">MemberService</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="nd">@MethodAop</span><span class="o">(</span><span class="s">"test value"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">hello</span><span class="o">(</span><span class="nc">String</span> <span class="n">param</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="s">"OK"</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">internal</span><span class="o">(</span><span class="nc">String</span> <span class="n">param</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="s">"OK"</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></div></div>

<p>hello에만적용된다는뜻</p>

<h3 id="bean"><span class="me-2">bean</span><a href="#bean" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">hello.aop.pointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.aspectj.lang.ProceedingJoinPoint</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Around</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Aspect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Order</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Import</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">hello.aop.order.OrderService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="nd">@Import</span><span class="o">({</span><span class="nc">BeanTest</span><span class="o">.</span><span class="na">BeanAspect</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BeanTest</span> <span class="o">{</span>
	<span class="nd">@Autowired</span>
	<span class="nc">OrderService</span> <span class="n">orderService</span><span class="o">;</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">success</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">orderService</span><span class="o">.</span><span class="na">orderItem</span><span class="o">(</span><span class="s">"itemA"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Aspect</span>
	<span class="kd">static</span> <span class="kd">class</span> <span class="nc">BeanAspect</span> <span class="o">{</span>
		<span class="nd">@Around</span><span class="o">(</span><span class="s">"bean(orderService) || bean(*Repository)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">doLog</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[bean] {}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">());</span>
			<span class="k">return</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></div></div>

<p>이것도 잘안씀</p>

<h3 id="매게변수-전달"><span class="me-2">매게변수 전달</span><a href="#매게변수-전달" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">hello.aop.pointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.aspectj.lang.JoinPoint</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.ProceedingJoinPoint</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Around</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Aspect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Before</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Pointcut</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.BeforeEach</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Import</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">hello.aop.member.MemberService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">hello.aop.member.annotation.ClassAop</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">hello.aop.member.annotation.MethodAop</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="nd">@SpringBootTest</span>
<span class="nd">@Import</span><span class="o">({</span><span class="nc">ParameterTest</span><span class="o">.</span><span class="na">ParameterAspect</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ParameterTest</span> <span class="o">{</span>
	<span class="nd">@Autowired</span>
	<span class="nc">MemberService</span> <span class="n">memberService</span><span class="o">;</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">success</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"memberService proxy = {}"</span><span class="o">,</span> <span class="n">memberService</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
		<span class="n">memberService</span><span class="o">.</span><span class="na">hello</span><span class="o">(</span><span class="s">"helloA"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Aspect</span>
	<span class="kd">static</span> <span class="kd">class</span> <span class="nc">ParameterAspect</span> <span class="o">{</span>
		<span class="nd">@Pointcut</span><span class="o">(</span><span class="s">"execution(* hello.aop.member..*.*(..))"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">allMember</span><span class="o">()</span> <span class="o">{</span>

		<span class="o">}</span>

		<span class="nd">@Around</span><span class="o">(</span><span class="s">"allMember()"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">logArgs1</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
			<span class="nc">Object</span> <span class="n">arg1</span> <span class="o">=</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getArgs</span><span class="o">()[</span><span class="mi">0</span><span class="o">];</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[logArgs1]{}, arg={}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">(),</span> <span class="n">arg1</span><span class="o">);</span>
			<span class="k">return</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="nd">@Around</span><span class="o">(</span><span class="s">"allMember() &amp;&amp; args(arg, ..)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">logArgs2</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">arg</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[logArgs1]{}, arg={}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">(),</span> <span class="n">arg</span><span class="o">);</span>
			<span class="k">return</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="nd">@Before</span><span class="o">(</span><span class="s">"allMember() &amp;&amp; args(arg, ..)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">logArg3</span><span class="o">(</span><span class="nc">String</span> <span class="n">arg</span><span class="cm">/*string 아니면 실행안됨*/</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[logArgs3] arg={}"</span><span class="o">,</span> <span class="n">arg</span><span class="o">);</span>
		<span class="o">}</span>

		<span class="c1">//프록시에서꺼내야할때</span>
		<span class="nd">@Before</span><span class="o">(</span><span class="s">"allMember() &amp;&amp; this(obj)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisArgs</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">,</span> <span class="nc">MemberService</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[this]{}, obj={}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">(),</span> <span class="n">obj</span><span class="o">);</span>
		<span class="o">}</span>

		<span class="c1">//실제객체에서꺼내야할때</span>
		<span class="nd">@Before</span><span class="o">(</span><span class="s">"allMember() &amp;&amp; target(obj)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">targetArgs</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">,</span> <span class="nc">MemberService</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[target]{}, obj={}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">(),</span> <span class="n">obj</span><span class="o">);</span>
		<span class="o">}</span>

		<span class="nd">@Before</span><span class="o">(</span><span class="s">"allMember() &amp;&amp; @target(annotation)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">atTarget</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">,</span> <span class="nc">ClassAop</span> <span class="n">annotation</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[@target]{}, obj={}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">(),</span> <span class="n">annotation</span><span class="o">);</span>
		<span class="o">}</span>

		<span class="nd">@Before</span><span class="o">(</span><span class="s">"allMember() &amp;&amp; @within(annotation)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">atWithin</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">,</span> <span class="nc">ClassAop</span> <span class="n">annotation</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[@within]{}, obj={}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">(),</span> <span class="n">annotation</span><span class="o">);</span>
		<span class="o">}</span>

		<span class="nd">@Before</span><span class="o">((</span><span class="s">"allMember() &amp;&amp; @annotation(annotation)"</span><span class="o">))</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">atAnnotation</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">,</span> <span class="nc">MethodAop</span> <span class="n">annotation</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[@annotation]{}, annotationValue={}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">(),</span> <span class="n">annotation</span><span class="o">);</span>
		<span class="o">}</span>

	<span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>logArgs1 : joinPoint.getArgs()[0] 와 같이 매개변수를 전달 받는다.</li>
  <li>logArgs2 : args(arg,..) 와 같이 매개변수를 전달 받는다.</li>
  <li>logArgs3 : @Before 를 사용한 축약 버전이다. 추가로 타입을 String 으로 제한했다.</li>
  <li>this : 프록시 객체를 전달 받는다.</li>
  <li>target : 실제 대상 객체를 전달 받는다.</li>
  <li>@target , @within : 타입의 애노테이션을 전달 받는다.</li>
  <li>@annotation : 메서드의 애노테이션을 전달 받는다. 여기서는 annotation.value()로 해당 애노테이션의 값을 출력하는 모습을 확인할 수 있다. (제일쓸만함)</li>
  <li>로그
2024-02-25T16:17:41.355+09:00  INFO 65532 — [    Test worker] hello.aop.pointcut.ParameterTest         : memberService proxy = class hello.aop.member.MemberServiceImpl$ $SpringCGLIB$ $0
2024-02-25T16:17:41.371+09:00  INFO 65532 — [    Test worker] hello.aop.pointcut.ParameterTest         : [logArgs1]String hello.aop.member.MemberServiceImpl.hello(String), arg=helloA
2024-02-25T16:17:41.374+09:00  INFO 65532 — [    Test worker] hello.aop.pointcut.ParameterTest         : [logArgs1]String hello.aop.member.MemberServiceImpl.hello(String), arg=helloA
2024-02-25T16:17:41.376+09:00  INFO 65532 — [    Test worker] hello.aop.pointcut.ParameterTest         : [@annotation]String hello.aop.member.MemberServiceImpl.hello(String), annotationValue=@hello.aop.member.annotation.MethodAop(“test value”)
2024-02-25T16:17:41.394+09:00  INFO 65532 — [    Test worker] hello.aop.pointcut.ParameterTest         : [logArgs3] arg=helloA
2024-02-25T16:17:41.395+09:00  INFO 65532 — [    Test worker] hello.aop.pointcut.ParameterTest         : [target]String hello.aop.member.MemberServiceImpl.hello(String), obj=hello.aop.member.MemberServiceImpl@39851c5
2024-02-25T16:17:41.395+09:00  INFO 65532 — [    Test worker] hello.aop.pointcut.ParameterTest         : [this]String hello.aop.member.MemberServiceImpl.hello(String), obj=hello.aop.member.MemberServiceImpl@39851c5</li>
</ul>

<h3 id="this-vs-target"><span class="me-2">this vs target</span><a href="#this-vs-target" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<font color="#bfbfbf">별로 안중요하다</font>
<font color="#bfbfbf">근데 어렵다</font>
<font color="#bfbfbf">어쩔까</font>
<p>일단 * 사용못함</p>

<p>스프링에서 AOP를 적용하면 실제 target객체대신 프록시가 빈으로 등록된다 그럼 여기서</p>

<ul>
  <li>this : 스프링빈으로 등록된 프록시 객체를 대상으로 포인트컷 매핑</li>
  <li>target: 실제 target객체를 대상으로 포인트컷을 매칭</li>
</ul>

<p><a href="/assets/images/high/Untitled2.png" class="popup img-link  shimmer"><img src="/assets/images/high/Untitled2.png" alt="images" loading="lazy"></a></p>

<ul>
  <li>MemberService Interface 지정
    <ul>
      <li>this(MemberService) : 프록시객체를 보고 판단. this는 부모타입을 허용하기때문에 memberService interface에도 AOP적용</li>
      <li>target(MemberService) :  target객체를 보고 판단. target은 부모타입을 허용하기때문에 memberService interface에도 AOP적용</li>
    </ul>
  </li>
  <li>MemberServiceImpl 구체클래스 지정
    <ul>
      <li>this(MemberServiceImpl) : proxy객체를 보고 판단. JDK 동적 프록시로 만들어진 proxy 객체는 MemberService 인터페이스를 기반으로 구현된 새로운 클래스다
  ⇒ MemberServiceImpl을 알지못해 AOP적용대상이 아님</li>
      <li>target(MemberServiceImpl) : target객체를 보고 판단. AOP적용대상임</li>
    </ul>
  </li>
</ul>

<p><a href="/assets/images/high/Untitled3.png" class="popup img-link  shimmer"><img src="/assets/images/high/Untitled3.png" alt="images" loading="lazy"></a></p>

<ul>
  <li>MemberService interface 지정
    <ul>
      <li>this(MemberService) : proxy객체를 보고 판단. this는 부모를 허용해서 AOP 적용됨</li>
      <li>target(MemberService) : target객체를 보고 판단. target은 부모를 허용해서 AOP 적용됨</li>
    </ul>
  </li>
  <li>MemberServiceImpl 구체클래스 지정
    <ul>
      <li>this(MemberServiceImpl) : proxy객체를 보고 판단하는데 CGLIB proxy객체가 MemberServiceImpl을 상속받아 만들어져서 AOP적용됨. this가 부모를 허용해서 포인트컷의 대상임
        <ul>
          <li>this(MemberServiceImpl) : target객체를 보고 판단. target객체가 MemberServiceImpl타입이라 AOP적용 대상임
⇒ 프로시 대상인 this는 프록시 생성전략에따라 결과가 다름</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">hello.aop.pointcut</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.aspectj.lang.ProceedingJoinPoint</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Around</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Aspect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Import</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">hello.aop.member.MemberService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">hello.aop.member.MemberServiceImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="nd">@SpringBootTest</span>
<span class="nd">@Import</span><span class="o">({</span><span class="nc">ThisTargetTest</span><span class="o">.</span><span class="na">ThisTargetAspect</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThisTargetTest</span> <span class="o">{</span>
	<span class="nd">@Autowired</span>
	<span class="nc">MemberService</span> <span class="n">memberService</span><span class="o">;</span>

	<span class="nd">@Test</span>
	<span class="kt">void</span> <span class="nf">success</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"memberService Proxy={}"</span><span class="o">,</span> <span class="n">memberService</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
		<span class="n">memberService</span><span class="o">.</span><span class="na">hello</span><span class="o">(</span><span class="s">"helloA"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Aspect</span>
	<span class="kd">static</span> <span class="kd">class</span> <span class="nc">ThisTargetAspect</span> <span class="o">{</span>
		<span class="c1">//부모타입허용</span>
		<span class="nd">@Around</span><span class="o">(</span><span class="s">"this(hello.aop.member.MemberService)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">doThisInterface</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[this-interface] {}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">());</span>
			<span class="k">return</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="c1">//부모타입허용</span>
		<span class="nd">@Around</span><span class="o">(</span><span class="s">"target(hello.aop.member.MemberService)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">doTargetInterface</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[target-interface] {}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">());</span>
			<span class="k">return</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="c1">//부모타입허용</span>
		<span class="nd">@Around</span><span class="o">(</span><span class="s">"this(hello.aop.member.MemberServiceImpl)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">doThisClass</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[this-class] {}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">());</span>
			<span class="k">return</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="c1">//부모타입허용</span>
		<span class="nd">@Around</span><span class="o">(</span><span class="s">"target(hello.aop.member.MemberServiceImpl)"</span><span class="o">)</span>
		<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">doTargetClass</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
			<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"[target-class] {}"</span><span class="o">,</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">());</span>
			<span class="k">return</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>JDK프록시 로그
  2024-02-25T17:19:51.082+09:00  INFO 78071 — [    Test worker] hello.aop.pointcut.ThisTargetTest        : memberService Proxy=class jdk.proxy3.$Proxy63
  2024-02-25T17:19:51.113+09:00  INFO 78071 — [    Test worker] hello.aop.pointcut.ThisTargetTest        : [target-class] String hello.aop.member.MemberService.hello(String)
  2024-02-25T17:19:51.116+09:00  INFO 78071 — [    Test worker] hello.aop.pointcut.ThisTargetTest        : [target-interface] String hello.aop.member.MemberService.hello(String)
  2024-02-25T17:19:51.119+09:00  INFO 78071 — [    Test worker] hello.aop.pointcut.ThisTargetTest        : [this-interface] String hello.aop.member.MemberService.hello(String)</li>
  <li>CGLIB
  2024-02-25T17:21:38.735+09:00  INFO 78414 — [    Test worker] hello.aop.pointcut.ThisTargetTest        : memberService Proxy=class hello.aop.member.MemberServiceImpl$ $SpringCGLIB$ $0
  2024-02-25T17:21:38.751+09:00  INFO 78414 — [    Test worker] hello.aop.pointcut.ThisTargetTest        : [target-class] String hello.aop.member.MemberServiceImpl.hello(String)
  2024-02-25T17:21:38.752+09:00  INFO 78414 — [    Test worker] hello.aop.pointcut.ThisTargetTest        : [target-interface] String hello.aop.member.MemberServiceImpl.hello(String)
  2024-02-25T17:21:38.752+09:00  INFO 78414 — [    Test worker] hello.aop.pointcut.ThisTargetTest        : [this-class] String hello.aop.member.MemberServiceImpl.hello(String)
  2024-02-25T17:21:38.752+09:00  INFO 78414 — [    Test worker] hello.aop.pointcut.ThisTargetTest        : [this-interface] String hello.aop.member.MemberServiceImpl.hello(String)</li>
</ul>

<p>참고로 스프링은 프록시를 기본으로 CGLIB를 사용하는데 
<code class="language-plaintext highlighter-rouge">spring.aop.proxy-target-class=false</code> false로 하면 JDK프록시로 생성됨</p>

<p>기본값이 왜 CGLIB인지는 이후 강의에 설명</p>

    <script type="module" src="/assets/js/blockquote.js"></script>
  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/spring/">Spring</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/spring/"
            class="post-tag no-text-decoration"
          >spring</a>
        
          <a
            href="/tags/%EA%B9%80%EC%98%81%ED%95%9C%EC%8A%A4%ED%94%84%EB%A7%81%ED%95%B5%EC%8B%AC%EC%9B%90%EB%A6%AC-%EA%B3%A0%EA%B8%89/"
            class="post-tag no-text-decoration"
          >김영한스프링핵심원리-고급</a>
        
          <a
            href="/tags/%ED%8F%AC%EC%9D%B8%ED%8A%B8%EC%BB%B7/"
            class="post-tag no-text-decoration"
          >포인트컷</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">공유하기</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=[%EA%B9%80%EC%98%81%ED%95%9C%20%EC%8A%A4%ED%94%84%EB%A7%81%20%ED%95%B5%EC%8B%AC%EC%9B%90%EB%A6%AC%20-%20%EA%B3%A0%EA%B8%89]%20%ED%8F%AC%EC%9D%B8%ED%8A%B8%20%EC%BB%B7%20%EC%A7%80%EC%8B%9C%EC%9E%90%20-%20%ED%9E%88%ED%9E%88&url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2F%25ED%258F%25AC%25EC%259D%25B8%25ED%258A%25B8%25EC%25BB%25B7%25EC%25A7%2580%25EC%258B%259C%25EC%259E%2590%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=[%EA%B9%80%EC%98%81%ED%95%9C%20%EC%8A%A4%ED%94%84%EB%A7%81%20%ED%95%B5%EC%8B%AC%EC%9B%90%EB%A6%AC%20-%20%EA%B3%A0%EA%B8%89]%20%ED%8F%AC%EC%9D%B8%ED%8A%B8%20%EC%BB%B7%20%EC%A7%80%EC%8B%9C%EC%9E%90%20-%20%ED%9E%88%ED%9E%88&u=http%3A%2F%2Flocalhost%3A4000%2Fposts%2F%25ED%258F%25AC%25EC%259D%25B8%25ED%258A%25B8%25EC%25BB%25B7%25EC%25A7%2580%25EC%258B%259C%25EC%259E%2590%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2F%25ED%258F%25AC%25EC%259D%25B8%25ED%258A%25B8%25EC%25BB%25B7%25EC%25A7%2580%25EC%258B%259C%25EC%259E%2590%2F&text=[%EA%B9%80%EC%98%81%ED%95%9C%20%EC%8A%A4%ED%94%84%EB%A7%81%20%ED%95%B5%EC%8B%AC%EC%9B%90%EB%A6%AC%20-%20%EA%B3%A0%EA%B8%89]%20%ED%8F%AC%EC%9D%B8%ED%8A%B8%20%EC%BB%B7%20%EC%A7%80%EC%8B%9C%EC%9E%90%20-%20%ED%9E%88%ED%9E%88" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="링크 복사하기"
      data-title-succeed="링크가 복사되었습니다!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>
<div id="giscus">
    <script src="https://giscus.app/client.js"
            data-repo="nunnunnu/nunnunnu.github.io"
            data-repo-id="R_kgDOMWEGow"
            data-category="Comments"
            data-category-id="DIC_kwDOMWEGo84ChY2C"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="bottom"
            data-theme="noborder_light"
            data-lang="ko"
            crossorigin="anonymous"
            async>
    </script>
</div>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">최근 업데이트</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/REDIS_pub_sub/">[REDIS] Spring boot - REDIS pub/sub 구현(서버 간 캐시 데이터 불일치 해결)</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/swap%EB%A9%94%EB%AA%A8%EB%A6%AC/">[EC2] Spring boot 프로젝트 Gradle 빌드 멈춤 현상 해결</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/domain_https/">[사이드프로젝트 aws배포] DNS발급/연결 & HTTPS 설정</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/spring-aws_ec2/">[스프링 부트와 AWS로 혼자 구현하는 웹 서비스] 6장 AWS 서버 환경을 만들어보자 - AWS EC2</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/%EA%B2%80%EC%83%89%EC%96%B4-%EC%9E%90%EB%8F%99%EC%99%84%EC%84%B1-%EC%8B%9C%EC%8A%A4%ED%85%9C&%EC%9C%A0%ED%88%AC%EB%B8%8C%EC%84%A4%EA%B3%84/">[가상 면접 사례로 배우는 대규모 시스템 설계 기초] 13장 검색어 자동완성 시스템&유투브 설계</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">인기 태그</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/spring/">spring</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/java/">java</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/jpa/">jpa</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%B1%85%EC%9A%94%EC%95%BD/">책요약</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/orm/">ORM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94%EC%9D%98%EC%A0%95%EC%84%9D/">자바의정석</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B5%AD%EB%B9%84%EA%B5%90%EC%9C%A1/">국비교육</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%80%EC%98%81%ED%95%9C%EC%8A%A4%ED%94%84%EB%A7%81%ED%95%B5%EC%8B%AC%EC%9B%90%EB%A6%AC-%EA%B3%A0%EA%B8%89/">김영한스프링핵심원리-고급</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/kotlin/">kotlin</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C/">연습문제</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="d-none ps-0 pe-4">
    <h2 class="panel-heading ps-3 mb-2">바로가기</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">관련된 글</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/%ED%94%84%EB%A1%9D%EC%8B%9C%EA%B8%B0%EC%88%A0%EA%B3%BC%ED%95%9C%EA%B3%84/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1709305200"
  data-df="YYYY/MM/DD"
  
>
  2024/03/02
</time>

              <h4 class="pt-0 my-2">[김영한 스프링 핵심원리 - 고급] 프록시 기술과 한계</h4>
              <div class="text-muted">
                <p>JDK 동적 프록시의 한계


  
    타입캐스팅

    인터페이스 기반으로 프록시를 생성하기때문에 구체클래스로 타입캐스팅이 불가능하다는 한계가 있음

    1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
  package hello.ao...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/%ED%94%84%EB%A1%9D%EC%8B%9C%EB%82%B4%EB%B6%80%ED%98%B8%EC%B6%9C/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1708873200"
  data-df="YYYY/MM/DD"
  
>
  2024/02/26
</time>

              <h4 class="pt-0 my-2">[김영한 스프링 핵심원리 - 고급] 프록시 내부 호출</h4>
              <div class="text-muted">
                <p>문제

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
package hello.aop.internalcall;

import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Component;
 
@Slf4j
@Component
public cl...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/%ED%94%84%EB%A1%9D%EC%8B%9C_%ED%94%84%EB%A1%9D%EC%8B%9C-%ED%8C%A8%ED%84%B4,-%EB%8D%B0%EC%BD%94%EB%A0%88%EC%9D%B4%ED%84%B0-%ED%8C%A8%ED%84%B4/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1708095600"
  data-df="YYYY/MM/DD"
  
>
  2024/02/17
</time>

              <h4 class="pt-0 my-2">[김영한 스프링 핵심원리 - 고급] 프록시- 프록시 패턴, 데코레이터 패턴</h4>
              <div class="text-muted">
                <p>구조1. 인터페이스 + 구현클래스 - 수동등록

      package com.example.proxy.app.v1;
    
  import org.springframework.web.bind.annotation.GetMapping;
  import org.springframework.web.bind.annotation.RequestMapping;...</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/%ED%94%84%EB%A1%9D%EC%8B%9C_%ED%94%84%EB%A1%9D%EC%8B%9C-%ED%8C%A8%ED%84%B4,-%EB%8D%B0%EC%BD%94%EB%A0%88%EC%9D%B4%ED%84%B0-%ED%8C%A8%ED%84%B4/"
      class="btn btn-outline-primary"
      aria-label="이전 글"
    >
      <p>[김영한 스프링 핵심원리 - 고급] 프록시- 프록시 패턴, 데코레이터 패턴</p>
    </a>
  

  
    <a
      href="/posts/%ED%94%84%EB%A1%9D%EC%8B%9C%EB%82%B4%EB%B6%80%ED%98%B8%EC%B6%9C/"
      class="btn btn-outline-primary"
      aria-label="다음 글"
    >
      <p>[김영한 스프링 핵심원리 - 고급] 프록시 내부 호출</p>
    </a>
  
</nav>

            
              
              <!-- The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2024</time>

    
      <a href="https://github.com/username">jinny</a>.
    

    
  </p>

  <p>
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">인기 태그</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/spring/">spring</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/java/">java</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/jpa/">jpa</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%B1%85%EC%9A%94%EC%95%BD/">책요약</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/orm/">ORM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94%EC%9D%98%EC%A0%95%EC%84%9D/">자바의정석</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B5%AD%EB%B9%84%EA%B5%90%EC%9C%A1/">국비교육</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%80%EC%98%81%ED%95%9C%EC%8A%A4%ED%94%84%EB%A7%81%ED%95%B5%EC%8B%AC%EC%9B%90%EB%A6%AC-%EA%B3%A0%EA%B8%89/">김영한스프링핵심원리-고급</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/kotlin/">kotlin</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C/">연습문제</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">새 버전의 콘텐츠를 사용할 수 있습니다.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      업데이트
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->
    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/ko.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.29.0/dist/tocbot.min.js"></script>







<script src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  







    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

